<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>小梦岛 - ROYIANS个人博客</title>
  
  <subtitle>For my vidorra</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://www.royians.cn/"/>
  <updated>2019-11-27T07:03:15.372Z</updated>
  <id>https://www.royians.cn/</id>
  
  <author>
    <name>Morty.ROY</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>我又搬移博客了</title>
    <link href="https://www.royians.cn/2333/01.01.49324a7a/"/>
    <id>https://www.royians.cn/2333/01.01.49324a7a/</id>
    <published>2333-01-01T03:45:14.000Z</published>
    <updated>2019-11-27T07:03:15.372Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Dec 13 2019 16:47:30 GMT+0800 (GMT+08:00) --><p>没错，我又搬移博客了。</p><a id="more"></a><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/dplayer/dist/DPlayer.min.css"><div id="dplayer"></div><style>video{margin:0!important}#dplayer{margin-bottom:20px}</style><script src="https://cdn.jsdelivr.net/npm/dplayer/dist/DPlayer.min.js"></script><script>const dp=new DPlayer({container:document.getElementById("dplayer"),video:{url:"http://quan.qq.com/video/1098_17f103e7100692dc277fbf6f7fc1eed8"},danmaku:{addition:["https://dplayer.moerats.com/v3/bilibili?cid=129624800"]}})</script><p>三年前到现在经历了从 Gihub Pages + hexo、到 Vultr VPS + 宝塔面板 LNMP + hexo，再到 Google 的 Blogger，然后是本地 + hexo。。。这个博客折腾来折腾去，换了N多个地方，哈哈😄，我现在又准备迁移到Netlify + hexo + Github这种组合了。emm，最近投了米哈游的简历，说是11月12号之前反馈结果，现在还有两周时间，我要好好准备了。博客就先这样，以前写的文章日后搬运过来。。</p><blockquote class="blockquote-center"><p>For My Future</p></blockquote><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Dec 13 2019 16:47:30 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;没错，我又搬移博客了。&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="折腾" scheme="https://www.royians.cn/tags/%E6%8A%98%E8%85%BE/"/>
    
  </entry>
  
  <entry>
    <title>测试博客插件</title>
    <link href="https://www.royians.cn/2099/11.01.49627526/"/>
    <id>https://www.royians.cn/2099/11.01.49627526/</id>
    <published>2099-11-01T05:47:59.000Z</published>
    <updated>2019-12-05T07:08:16.846Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Dec 13 2019 16:47:30 GMT+0800 (GMT+08:00) --><p>ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInAiKS5zcmM9Imh0dHBzOi8vd3d3Lm5mb3JkLnVrL3ZpZXdzL3Byb3h5LnBocD9odHRwczovL3d3dy55b3V0dWJlLmNvbS9lbWJlZC92aWRlb3Nlcmllcz9saXN0PVBMUXFiZG5BZ29SbWFQYUczYzFhTklGbkJBNGVJRWppcnMiOw==</p><link rel="stylesheet" href="https://cdn.bootcss.com/plyr/3.5.6/plyr.css"><script src="https://cdn.bootcss.com/plyr/3.5.6/plyr.js"></script><div class="plyr__video-embed" id="player"><iframe id="if" width="560" height="315" src="https://www.youtube.com/embed/Y5RlA3SW97g" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div><script>const player=new Plyr("#player")</script><script>setTimeout(document.getElementById("if").src="https://www.nford.uk/views/proxy.php?https://www.youtube.com/embed/Y5RlA3SW97g",5e3)</script><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      本页面仅供测试使用
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>2019-祝我生日快乐</title>
    <link href="https://www.royians.cn/2019/11.28.f815fc22/"/>
    <id>https://www.royians.cn/2019/11.28.f815fc22/</id>
    <published>2019-11-28T01:07:14.000Z</published>
    <updated>2019-11-28T01:58:22.490Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Dec 13 2019 16:47:30 GMT+0800 (GMT+08:00) --><link rel="stylesheet" href="https://cdn.bootcss.com/plyr/3.5.6/plyr.css"><script src="https://cdn.bootcss.com/plyr/3.5.6/plyr.js"></script><video poster="https://api.dujin.org/bing/1920.php" id="player" playsinline controls><source id="video-player" src="https://mvvideoshare1.meitudata.com/582c187b60fb97839.mp4" type="video/mp4"></video><script>const player=new Plyr("#player")</script><p>今天是我的生日，哈哈。1997-2019，已经22年了。今年是个关键的一年，我大四了。即将毕业，现在我的生日愿望就是在年底之前找到一份让我满意的工作。</p><p>唉，自己未来到哪里发展，会发展成个什么样子都是未知数，只希望我能够让自己满意，让家里人满意。</p><p>还有就是找个我爱的人，爱我的人。母胎solo22年了😂。</p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      祝我生日快乐
    
    </summary>
    
    
      <category term="日常" scheme="https://www.royians.cn/categories/%E6%97%A5%E5%B8%B8/"/>
    
    
      <category term="日常" scheme="https://www.royians.cn/tags/%E6%97%A5%E5%B8%B8/"/>
    
  </entry>
  
  <entry>
    <title>Redis入门</title>
    <link href="https://www.royians.cn/2019/11.26.6a343b7f/"/>
    <id>https://www.royians.cn/2019/11.26.6a343b7f/</id>
    <published>2019-11-26T03:55:56.000Z</published>
    <updated>2019-11-27T07:03:15.422Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Dec 13 2019 16:47:29 GMT+0800 (GMT+08:00) --><h2 id="NoSql"><a href="#NoSql" class="headerlink" title="NoSql"></a>NoSql</h2><p>NoSql = Not Only SQL，意思是不仅仅是SQL。NoSql是一项全新的数据库理念，指的是非关系型数据库，是对不同于传统的关系型数据库的数据库管理系统的统称。<br>NoSql用于超大规模数据的存储（例如Google或Facebook每天为他们的用户收集万亿比特的数据）。这些类型的数据存储不需要固定的模式，无需多于操作就可以横向扩展。<br>随着互联网web2.0网站的兴起，传统的关系数据库在应付web2.0网站，特别是超大规模和高并发的SNS类型的web2.0纯动态网站已经显得力不从心，暴露了很多难以克服的问题，而非关系型的数据库则由于其本身的特点得到了非常迅速的发展。NoSQL数据库的产生就是为了解决大规模数据集合多重数据种类带来的挑战，尤其是大数据应用难题。</p><h3 id="NoSql和关系型数据库的比较"><a href="#NoSql和关系型数据库的比较" class="headerlink" title="NoSql和关系型数据库的比较"></a>NoSql和关系型数据库的比较</h3><ul><li>优点<ul><li>成本<br>NoSql数据库简单易部署，基本都是开源软件，不需要像使用oracle那样花费大量成本购买使用，相比关系型数据库价格便宜。</li><li>查询速度<br>NoSql数据库将数据存储于缓存中，关系型数据库将数据存储在硬盘中，自然查询速度远不及NoSql数据库。</li><li>存储数据格式<br>NoSql的存储格式是<code>key:value</code>的形式、图片形式、文档形式等等，所以可以存储基础类型以及对象或者是集合等各种形式，而数据库则支支持基础类型。</li><li>扩展性<br>关系型数据库有类似join这样的多表查询机制的限制导致扩展很艰难</li></ul></li><li>缺点<ul><li>维护的工具和资料有限<br>因为NoSql是属于新的技术，不能和关系型数据库十几年的技术同日而语。</li><li>不提供对sql的是支持，如果不支持sql这样的工业标准，将产生一定用户的学习和使用的成本。</li><li>不提供关系型数据库对事物的事务处理。</li></ul></li></ul><h3 id="非关系型数据库的优势"><a href="#非关系型数据库的优势" class="headerlink" title="非关系型数据库的优势"></a>非关系型数据库的优势</h3><ul><li>性能<br>NoSql是基于键值对的，可以想象成表中的主键和值的对应关系，而且不需要经过SQL层的解析，所以性能非常高。</li><li>可扩展性：<br>可扩展性同样也是因为基于键值对，数据之间没有耦合性，所以非常容易水平扩展。</li></ul><h3 id="关系型数据库的优势"><a href="#关系型数据库的优势" class="headerlink" title="关系型数据库的优势"></a>关系型数据库的优势</h3><ul><li>复杂查询可以用SQL语句方便的在一个表以及多个表之间做非常复杂的数据查询。</li><li>事务支持使得对于安全性能很高的数据访问要求得以实现。对于这两类数据库，对方的优势就是自己的弱势，反之亦然。</li></ul><h3 id="主流产品"><a href="#主流产品" class="headerlink" title="主流产品"></a>主流产品</h3><ol><li>键值（Key-Value）存储数据库<ul><li>相关产品<ul><li>Tokyo Cabinet/Tyrant</li><li>Redis</li><li>Voldemort</li><li>Berkelry DB</li></ul></li><li>典型应用<br>内容缓存，主要用于处理大量数据的高访问负载</li><li>数据模型<br>一系列键值对</li><li>优势<br>快速查询</li><li>劣势<br>存储的数据缺少结构化</li></ul></li><li>列存储数据库<ul><li>相关产品<ul><li>Cassandra</li><li>HBase</li><li>Riak</li></ul></li><li>典型应用<br>分布式的文件系统</li><li>数据模型<br>以列簇式存储，将同一列数据存在一起</li><li>优势<br>查找速度快、可扩展性强，更容易进行分布式扩展</li><li>劣势<br>功能相对局限</li></ul></li><li>文档型数据库<ul><li>相关产品<ul><li>CouchDB</li><li>MongoDB</li></ul></li><li>典型应用<br>Web应用（与Key-Value类似，Value是结构化的）</li><li>数据模型<br>一系列键值对</li><li>优势<br>数据结构要求不严格</li><li>劣势<br>查询性能不高，而且缺乏统一的查询语法</li></ul></li><li>图形（Graph）数据库<ul><li>相关产品<ul><li>Neo4J</li><li>InfoGrid</li><li>Infinite Graph</li></ul></li><li>典型应用<br>社交网络</li><li>数据模型<br>图结构</li><li>优势<br>利用图结构相关算法</li><li>劣势<br>需要对整个图做计算才能得出结果，不容易做分布式的集群方案。</li></ul></li></ol><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>关系型数据库与NoSQL数据库并非对立而是互补的关系，即通常情况下使用关系型数据库，在适合使用NoSQL的时候使用NoSQL数据库，<br>让NoSQL数据库对关系型数据库的不足进行弥补。<br>一般会将数据存储在关系型数据库中，在nosql数据库中备份存储关系型数据库的数据</p><h2 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h2><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>Redis是一款高性能的NOSQL系列的非关系型数据库是用C语言开发的一个开源的高性能键值对（key-value）数据库，官方提供测试数据，50个并发执行100000个请求,读的速度是110000次/s,写的速度是81000次/s ，且Redis通过提供多种键值数据类型来适应不同场景下的存储需求，目前为止Redis支持的键值数据类型如下：</p><ol><li>字符串类型 string</li><li>哈希类型 hash</li><li>列表类型 list</li><li>集合类型 set</li><li>有序集合类型 sortedset</li></ol><h3 id="Redis的应用场景"><a href="#Redis的应用场景" class="headerlink" title="Redis的应用场景"></a>Redis的应用场景</h3><ol><li>缓存（数据查询、短链接、新闻内容、商品内容等等）</li><li>聊天室的在线好友列表</li><li>任务队列（秒杀、抢购、12306等）</li><li>应用排行榜</li><li>网站访问统计</li><li>数据过期处理（可以精确到毫秒）</li><li>分布式集群架构中的session分离</li></ol><h3 id="Redis的下载、安装与配置"><a href="#Redis的下载、安装与配置" class="headerlink" title="Redis的下载、安装与配置"></a>Redis的下载、安装与配置</h3><h4 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h4><p>访问<a href="https://github.com/MicrosoftArchive/redis/releases" target="_blank" rel="noopener">github/MicrosoftArchive/redis</a>，下载Redis-x64-3.2.100.zip</p><p><img alt data-src="https://i.loli.net/2019/11/26/12FXyCIdVv7Qozp.png"></p><p><img alt data-src="https://i.loli.net/2019/11/26/ZpJbzXfrwMH4um7.png"></p><p>将压缩文件中的文件解压到单独的文件夹即可使用。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">redis.windows.conf: 配置文件</span><br><span class="line">redis-cli.exe: redis 客户端</span><br><span class="line">redis-server.exe: redis 服务器端</span><br></pre></td></tr></table></figure><h4 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h4><p>访问<a href="https://redis.io/download" target="_blank" rel="noopener">Redis.io</a>，点击Download按钮。</p><p><img alt data-src="https://i.loli.net/2019/11/26/EK5z4GYgRiqaJQU.png"></p><p>或者使用命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ wget http://download.redis.io/releases/redis-5.0.7.tar.gz</span><br></pre></td></tr></table></figure><p>解压</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ tar xzf redis-5.0.7.tar.gz</span><br></pre></td></tr></table></figure><p>移动到解压后的文件夹并编译</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> redis-5.0.7</span><br><span class="line">$ make</span><br></pre></td></tr></table></figure><p>等待编译完成后，二进制文件就被编译到<code>src</code>文件夹中了，我们可以通过下面的命令运行Redis服务器：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ src/redis-server</span><br></pre></td></tr></table></figure><p>你可以使用redis的内置客户端操作redis：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ src/redis-cli</span><br></pre></td></tr></table></figure><h3 id="试试看"><a href="#试试看" class="headerlink" title="试试看"></a>试试看</h3><p>以下的命令我们下次学，现在先来体验一下redis.</p><p>打开redis服务器端：</p><p><img alt data-src="https://i.loli.net/2019/11/26/zWQPFYBdqRipmAI.png"></p><p>打开客户端：</p><p><img alt data-src="https://i.loli.net/2019/11/26/SHtY18cNiIqsxKQ.png"></p><p>输入以下命令</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set msg &quot;Hello World!&quot;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get msg</span><br></pre></td></tr></table></figure><p><img alt data-src="https://i.loli.net/2019/11/26/dsnpWIymfHZ6rtR.png"></p><p>Bravo！</p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      Redis入门教程，初识Redis，简要了解Redis基本操作，学习通过Java操作Redis
    
    </summary>
    
    
      <category term="Redis" scheme="https://www.royians.cn/categories/Redis/"/>
    
    
      <category term="Redis" scheme="https://www.royians.cn/tags/Redis/"/>
    
  </entry>
  
  <entry>
    <title>Java NIO</title>
    <link href="https://www.royians.cn/2019/11.20.94795185/"/>
    <id>https://www.royians.cn/2019/11.20.94795185/</id>
    <published>2019-11-20T02:28:49.000Z</published>
    <updated>2019-11-27T07:03:15.451Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Dec 13 2019 16:47:29 GMT+0800 (GMT+08:00) --><p>今天开始啃一下<a href="http://tutorials.jenkov.com/java-nio/" target="_blank" rel="noopener">Java NIO</a>这个教程，了解一下Java NIO。Java网络编程、文件什么的就一直不太熟悉，希望这次能对这些知识有很好的了解。</p><a id="more"></a><p>下午在写吧。。</p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Dec 13 2019 16:47:29 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;今天开始啃一下&lt;a href=&quot;http://tutorials.jenkov.com/java-nio/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Java NIO&lt;/a&gt;这个教程，了解一下Java NIO。Java网络编程、文件什么的就一直不太熟悉，希望这次能对这些知识有很好的了解。&lt;/p&gt;
    
    </summary>
    
    
      <category term="Java之路" scheme="https://www.royians.cn/categories/Java%E4%B9%8B%E8%B7%AF/"/>
    
    
      <category term="Java" scheme="https://www.royians.cn/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>值传递、引用传递</title>
    <link href="https://www.royians.cn/2019/11.19.8373f479/"/>
    <id>https://www.royians.cn/2019/11.19.8373f479/</id>
    <published>2019-11-19T09:22:15.000Z</published>
    <updated>2019-12-05T07:17:37.391Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Dec 13 2019 16:47:29 GMT+0800 (GMT+08:00) --><blockquote><p>本文根据<a href="https://github.com/hollischuang/toBeTopJavaer/" title="toBeTopJavaer" target="_blank" rel="noopener">toBeTopJavaer</a>和《码出高效》补充学习Java</p></blockquote><p>Java是通过值传递来传递参数的，还是通过引用传递来传递的呢？这个争议由来已久。接下来看一看在Stack Overflow上<a href="https://stackoverflow.com/questions/40480/is-java-pass-by-reference-or-pass-by-value" target="_blank" rel="noopener">Is Java “pass-by-reference” or “pass-by-value”?</a>这个问题下，大家是怎么看的吧。</p><h2 id="观点一"><a href="#观点一" class="headerlink" title="观点一"></a>观点一</h2><p>我怕我翻译错，因此本来写了好多，最后还是用原文吧。</p><p>Stack Overflow上最高票(5558票)的观点是：</p><a id="more"></a><p>Java is always <strong>pass-by-value</strong>. Unfortunately, when we pass the value of an object, we are passing the <em>reference</em> to it. This is confusing to beginners.</p><p>It goes like this:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">  Dog aDog = <span class="keyword">new</span> Dog(<span class="string">"Max"</span>);</span><br><span class="line">  Dog oldDog = aDog;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// we pass the object to foo</span></span><br><span class="line">  foo(aDog);</span><br><span class="line">  <span class="comment">// aDog variable is still pointing to the "Max" dog when foo(...) returns.</span></span><br><span class="line">  aDog.getName().equals(<span class="string">"Max"</span>); <span class="comment">// true</span></span><br><span class="line">  aDog.getName().equals(<span class="string">"Fifi"</span>); <span class="comment">//false</span></span><br><span class="line">  aDog == oldDog; <span class="comment">// true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">foo</span><span class="params">(Dog d)</span> </span>&#123;</span><br><span class="line">  d.getName().equals(<span class="string">"Max"</span>); <span class="comment">// true</span></span><br><span class="line">  <span class="comment">// change d inside of foo() to point to a new Dog instance of "Fifi";</span></span><br><span class="line">  d = <span class="keyword">new</span> Dog(<span class="string">"Fifi"</span>);</span><br><span class="line">  d.getName().equals(<span class="string">"Fifi"</span>); <span class="comment">// true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>In the example above <code>aDog.getName()</code> will still return <code>&quot;Max&quot;</code>. The value aDog within <code>main</code> is not changed in the function <code>foo</code> with the <code>Dog &quot;Fifi&quot;</code> as the object reference is passed by value. If it were passed by reference, then the <code>aDog.getName()</code> in <code>main</code> would return <code>&quot;Fifi&quot;</code> after the call to <code>foo</code>.</p><p>Likewise:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Dog aDog = <span class="keyword">new</span> Dog(<span class="string">"Max"</span>);</span><br><span class="line">    Dog oldDog = aDog;</span><br><span class="line"></span><br><span class="line">    foo(aDog);</span><br><span class="line">    <span class="comment">// when foo(...) returns, the name of the dog has been changed to "Fifi"</span></span><br><span class="line">    aDog.getName().equals(<span class="string">"Fifi"</span>); <span class="comment">// true</span></span><br><span class="line">    <span class="comment">// but it is still the same dog:</span></span><br><span class="line">    aDog == oldDog; <span class="comment">// true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">foo</span><span class="params">(Dog d)</span> </span>&#123;</span><br><span class="line">    d.getName().equals(<span class="string">"Max"</span>); <span class="comment">// true</span></span><br><span class="line">    <span class="comment">// this changes the name of d to be "Fifi"</span></span><br><span class="line">    d.setName(<span class="string">"Fifi"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>In the above example, <code>Fifi</code> is the dog’s name after call to <code>foo(aDog)</code> because the object’s name was set inside of <code>foo(...)</code>. Any operations that <code>foo</code> performs on <code>d</code> are such that, for all practical purposes, they are performed on <code>aDog</code>, but it is <strong>not</strong> possible to change the value of the variable <code>aDog</code> itself.</p><h2 id="观点二"><a href="#观点二" class="headerlink" title="观点二"></a>观点二</h2><p>I just noticed you referenced my <a href="http://javadude.com/articles/passbyvalue.htm" target="_blank" rel="noopener">article</a>.</p><p>Java规范说在Java中任何东西都是值传递，在Java中没有“引用传递”。</p><p>理解这个的关键是</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Dog myDog;</span><br></pre></td></tr></table></figure><p>并<em>不是</em>一个Dog，而是一个指向Dog的<em>指针</em>。</p><p>什么意思呢？就是说当</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Dog myDog = <span class="keyword">new</span> Dog(<span class="string">"Rover"</span>);</span><br><span class="line">foo(myDog);</span><br></pre></td></tr></table></figure><p>的时候，你实际上给foo传递的是Dog对象的<em>地址</em>。</p><p>（我说“实际上”是因为Java指针并不是直接的地址，但是我们可以简单地把它理解为地址）</p><p>假设Dog对象的地址是在42，我们就把42传给foo方法。</p><p>如果我们是这样定义foo方法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">foo</span><span class="params">(Dog someDog)</span> </span>&#123;</span><br><span class="line">    someDog.setName(<span class="string">"Max"</span>);     <span class="comment">// AAA</span></span><br><span class="line">    someDog = <span class="keyword">new</span> Dog(<span class="string">"Fifi"</span>);  <span class="comment">// BBB</span></span><br><span class="line">    someDog.setName(<span class="string">"Rowlf"</span>);   <span class="comment">// CCC</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>让我们看看发生了什么：</p><ul><li>someDog的值被设置为42</li><li>在AAA行，<ul><li>someDog is followed to the Dog it points to(the Dog object at address 42)（意会，但是不好翻译😂）</li><li>that Dog (the one at address 42) is asked to change his name to Max</li></ul></li><li>在BBB行<ul><li>新建了一个Dog对象，假设他的地址是74</li><li>我们把someDog的值赋值为74</li></ul></li><li>在CCC行<ul><li>someDog is followed to the Dog it points to (the Dog object at address 74)</li><li>that Dog (the one at address 74) is asked to change his name to Rowlf</li></ul></li><li>然后，return。</li></ul><p>接下来我们想一下，执行foo后发生了什么，myDog改变了吗？</p><p>关键来了。</p><p>记得myDog是一个指针，而不是一个实际的Dog，那么答案是否定的，myDog地址仍然是42，它仍然指向了原来的Dog（但是因为AAA行，所以它的名字改成了Max，仍但是同一个Dog，myDog的值-42从来没有改变）</p><p>It’s perfectly valid to follow an address and change what’s at the end of it; that does not change the variable, however.（不知道如何翻译）</p><p>Java的工作原理很像C，你可以指定一个指针，把这个指针传递给一个方法，铜鼓这个指针，方法可以改变这个指针指向的对象的数据，但是却不能改变这个指针的指向。</p><p>在C++、Ada、Pascal和其他一些支持引用传递的语言中，你可以真的改变传进来的参数的指向。</p><p>If Java had pass-by-reference semantics, the foo method we defined above would have changed where myDog was pointing when it assigned someDog on line BBB.</p><p>Think of reference parameters as being aliases for the variable passed in. When that alias is assigned, so is the variable that was passed in.</p><h2 id="Hollis的观点"><a href="#Hollis的观点" class="headerlink" title="Hollis的观点"></a>Hollis的观点</h2><p>大神在他的toBeTopJavaer中是这样写的：</p><blockquote><p>值传递（pass by value）是指在调用函数时将实际参数<code>复制</code>一份传递到函数中，这样在函数中如果对<code>参数</code>进行修改，将不会影响到实际参数。<br>引用传递（pass by reference）是指在调用函数时将实际参数的地址<code>直接</code>传递到函数中，那么在函数中对<code>参数</code>所进行的修改，将影响到实际参数。</p></blockquote><p>那么，我来给大家总结一下，值传递和引用传递之前的区别的重点是什么。</p><p><img alt data-src="https://i.loli.net/2019/11/20/SheinBuyfvpagq7.png"></p><p>你有一把钥匙，当你的朋友想要去你家的时候，如果你直接把你的钥匙给他了，这就是引用传递。这种情况下，如果他对这把钥匙做了什么事情，比如他在钥匙上刻下了自己名字，那么这把钥匙还给你的时候，你自己的钥匙上也会多出他刻的名字。</p><p>你有一把钥匙，当你的朋友想要去你家的时候，你复刻了一把新钥匙给他，自己的还在自己手里，这就是值传递。这种情况下，他对这把钥匙做什么都不会影响你手里的这把钥匙。</p><p>但是，不管上面那种情况，你的朋友拿着你给他的钥匙，进到你的家里，把你家的电视砸了。那你说你会不会受到影响？而我们在pass方法中，改变user对象的name属性的值的时候，不就是在“砸电视”么。</p><p>我们来画一张图，看一下整个过程中发生了什么，然后我再告诉你，为啥Java中只有值传递。</p><p><img alt data-src="https://i.loli.net/2019/11/20/nZ43cGxIyflsDvq.png"></p><p>上面这种传递是什么传递？肯定不是引用传递，如果是引用传递的话，在<code>user=new User()</code>的时候，实际参数的引用也应该改为指向0X456789，但是实际上并没有。</p><p>通过概念我们也能知道，这里是把实际参数的引用的地址复制了一份，传递给了形式参数。所以，<strong>上面的参数其实是值传递，把实参对象引用的地址当做值传递给了形式参数</strong>。</p><p>我们再来回顾下之前的那个“砸电视”的例子，看那个例子中的传递过程发生了什么。</p><p><img alt data-src="https://i.loli.net/2019/11/20/vXZoHCwJbeKy3x8.png"></p><p>同样的，在参数传递的过程中，实际参数的地址0X1213456被拷贝给了形参，只是，在这个方法中，并没有对形参本身进行修改，而是修改的形参持有的地址中存储的内容。</p><p>所以，值传递和引用传递的区别并不是传递的内容。而是实参到底有没有被复制一份给形参。在判断实参内容有没有受影响的时候，要看传的的是什么，如果你传递的是个地址，那么就看这个地址的变化会不会有影响，而不是看地址指向的对象的变化。就像钥匙和房子的关系。</p><p>那么，既然这样，为啥上面同样是传递对象，传递的String对象和User对象的表现结果不一样呢？我们在pass方法中使用name = “hollischuang”;试着去更改name的值，阴差阳错的直接改变了name的引用的地址。因为这段代码，会new一个String，在把引用交给name，即等价于name = new String(“hollischuang”);。而原来的那个”Hollis”字符串还是由实参持有着的，所以，并没有修改到实际参数的值。</p><p><img alt data-src="https://i.loli.net/2019/11/20/rCGlPw9gDhxNKHR.png"></p><p><strong>所以说，Java中其实还是值传递的，只不过对于对象参数，值的内容是对象的引用。</strong></p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>无论是值传递还是引用传递，其实都是一种求值策略(<a href="https://en.wikipedia.org/wiki/Evaluation_strategy" target="_blank" rel="noopener">Evaluation strategy</a>)。在求值策略中，还有一种叫做按共享传递(call by sharing)。其实Java中的参数传递严格意义上说应该是按共享传递。</p><blockquote><p>按共享传递，是指在调用函数时，传递给函数的是实参的地址的拷贝（如果实参在栈中，则直接拷贝该值）。在函数内部对参数进行操作时，需要先拷贝的地址寻找到具体的值，再进行操作。如果该值在栈中，那么因为是直接拷贝的值，所以函数内部对参数进行操作不会对外部变量产生影响。如果原来拷贝的是原值在堆中的地址，那么需要先根据该地址找到堆中对应的位置，再进行操作。因为传递的是地址的拷贝所以函数内对值的操作对外部变量是可见的。</p></blockquote><p>简单点说，Java中的传递，是值传递，而这个值，实际上是对象的引用。</p><p>而按共享传递其实只是按值传递的一个特例罢了。所以我们可以说Java的传递是按共享传递，或者说Java中的传递是值传递。</p><h2 id="原文及参考"><a href="#原文及参考" class="headerlink" title="原文及参考"></a>原文及参考</h2><ol><li><a href="https://github.com/hollischuang/toBeTopJavaer/blob/master/basics/java-basic/java-pass-by.md" target="_blank" rel="noopener">toBeTopJavaer</a></li><li><a href="https://stackoverflow.com/questions/40480/is-java-pass-by-reference-or-pass-by-value" target="_blank" rel="noopener">Is Java “pass-by-reference” or “pass-by-value”?</a></li></ol><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Dec 13 2019 16:47:29 GMT+0800 (GMT+08:00) --&gt;&lt;blockquote&gt;&lt;p&gt;本文根据&lt;a href=&quot;https://github.com/hollischuang/toBeTopJavaer/&quot; title=&quot;toBeTopJavaer&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;toBeTopJavaer&lt;/a&gt;和《码出高效》补充学习Java&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;Java是通过值传递来传递参数的，还是通过引用传递来传递的呢？这个争议由来已久。接下来看一看在Stack Overflow上&lt;a href=&quot;https://stackoverflow.com/questions/40480/is-java-pass-by-reference-or-pass-by-value&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Is Java “pass-by-reference” or “pass-by-value”?&lt;/a&gt;这个问题下，大家是怎么看的吧。&lt;/p&gt;&lt;h2 id=&quot;观点一&quot;&gt;&lt;a href=&quot;#观点一&quot; class=&quot;headerlink&quot; title=&quot;观点一&quot;&gt;&lt;/a&gt;观点一&lt;/h2&gt;&lt;p&gt;我怕我翻译错，因此本来写了好多，最后还是用原文吧。&lt;/p&gt;&lt;p&gt;Stack Overflow上最高票(5558票)的观点是：&lt;/p&gt;
    
    </summary>
    
    
      <category term="Java之路" scheme="https://www.royians.cn/categories/Java%E4%B9%8B%E8%B7%AF/"/>
    
    
      <category term="Java" scheme="https://www.royians.cn/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>面向对象的三大基本特征和五大基本原则</title>
    <link href="https://www.royians.cn/2019/11.19.ed2b3e4/"/>
    <id>https://www.royians.cn/2019/11.19.ed2b3e4/</id>
    <published>2019-11-19T02:20:15.000Z</published>
    <updated>2019-11-27T07:03:15.436Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Dec 13 2019 16:47:29 GMT+0800 (GMT+08:00) --><blockquote><p>本文根据<a href="https://github.com/hollischuang/toBeTopJavaer/" title="toBeTopJavaer" target="_blank" rel="noopener">toBeTopJavaer</a>和《码出高效》补充学习Java</p></blockquote><h2 id="面向对象的三大基本特征"><a href="#面向对象的三大基本特征" class="headerlink" title="面向对象的三大基本特征"></a>面向对象的三大基本特征</h2><p>传统意义上，面向对象有三大特性：封装、继承、多态。在《码出高效》中，将“抽象”也作为面向对象的特性之一，支持“四大特征”的说法。手册解释道：</p><blockquote><p>抽象是程序员的核心素养之一，体现出程序员对业务的建模能力，以及对架构的宏观掌控力。虽然面向过程也需要进行一定的抽象能力，但是相对来说，面向对象思维，以对象模型为核心，丰富模型的内涵，扩展模型的外延，通过模型的行为组合去共同解决某一类问题，抽象能力显得尤为重要。</p></blockquote><a id="more"></a><h3 id="封装"><a href="#封装" class="headerlink" title="封装"></a>封装</h3><p>所谓封装，也就是把客观事物封装成抽象的类，并且类可以把自己的数据和方法只让可信的类或对象操作，对不可信的进行信息隐藏。封装是面向对象的特征之一，是对象和类概念的主要特性。简单地说，一个类就是一个封装了数据以及操作这些数据的代码的逻辑实体。在一个对象内部，某些代码或某些数据可以是私有的，不能被外界访问。通过这种方式，对象对内部数据提供了不同级别的保护，以防止程序中无关的部分意外的改变或错误的使用了对象的私有部分。</p><h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h3><p>继承是指这样一种能力：它可以使用现有类的所有功能，并在无需重新编写原来的类的情况下对这些功能进行扩展。通过继承创建的新类被称为“子类”或“派生类”，被继承的类被称为“基类”、“父类”或“超类”。继承的过程，就是从一般到特殊的过程。要实现继承，可以通过“继承”和“组合”来实现。继承概念的实现方式有两类：实现继承和接口继承。实现继承是指直接使用基类的属性和方法而无需额外的编码能力；接口继承是指仅使用属性和方法的名称，但是子类必须提供实现的能力。</p><h3 id="多态"><a href="#多态" class="headerlink" title="多态"></a>多态</h3><p>所谓多态就是指一个类实例的相同方法在不同情形下有不同的表现形式。多态机制使具有不同内部结构的对象可以共享相同的外部接口。这意味着，虽然针对不同对象的具体操作不同，但通过一个公共的类，它们（那些操作）可以通过相同的方式予以调用。</p><p>最常见的多态就是将子类传入父类参数中，运行时调用父类方法时通过传入的子类决定具体的内部结构或行为。</p><h3 id="抽象"><a href="#抽象" class="headerlink" title="抽象"></a>抽象</h3><p>抽象是面向对象思想最基础的能力之一，正确而严谨的业务抽象和建模分析能力是后续的封装、继承、多态的基础，是软件大厦的及时。在面向对象思维中，抽象分为归纳和演绎。前者是从具体到本质，从个性到共性，将一类对象的共同特征进行归一化的逻辑思维过程；后者是从本质到具体，从共性到个性，逐步形象化的过程。在归纳的过程中，需要抽象出对象的属性和行为的共性，难度大于演绎。演绎是在已有问题解决方案的基础上，正确地找到合适的使用场景。演绎错误在使用集合时比较常见，比如针对查多改少的业务场景，使用链表是非常不合理的；底层框架技术选型时如果偶错误，则可能导致技术架构完全不适应业务的快速发展。</p><h2 id="面向对象的五大基本原则"><a href="#面向对象的五大基本原则" class="headerlink" title="面向对象的五大基本原则"></a>面向对象的五大基本原则</h2><p>以上即是面向对象的三大基本特征。接下来我们讲五大原则：</p><h3 id="单一职责原则"><a href="#单一职责原则" class="headerlink" title="单一职责原则"></a>单一职责原则</h3><p>其核心思想为：一个类，最好只做一件事，只有一个引起它的变化。单一职责原则可以看作是低耦合、高内聚在面向对象原则上的引申，将职责定义为引起变化的原因，以提高内聚性来减少引起变化的原因。职责过多，可能引起它变化的原因就越多这将导致职责依赖，相互之间就产生影响，从而大大损伤其内聚性和耦合度。通常意义下的单一职责，就是指只有一种单一功能，不要为类实现过多的功能点，以保证实体只有一个引起它变化的原因。专注，是一个人优良的品质；同样地，单一也是一个类的优良设计。交杂不清的职责将会使得代码看起来特别别扭，牵一发而动全身，又是美感和必然导致丑陋的系统错误的风险。</p><h3 id="开放封闭原则"><a href="#开放封闭原则" class="headerlink" title="开放封闭原则"></a>开放封闭原则</h3><p>其核心思想是：软件实体应该是可扩展的，而不可修改的。也就是，对扩展开放，对修改是封闭的。开放封闭原则主要体现在两个方面：</p><ul><li>对扩展开放。意味着有新的需求或变化时，可以对现有代码进行扩展，以适应新的情况。</li><li>对修改封闭。意味着类一旦设计完成，就可以独立完成其工作，而不需要对其进行任何修改。</li></ul><p>实现开放封闭原则的核心思想就是对抽象编程，而不是对具体编程。因为抽象相对稳定。让类依赖于固定的抽象，所以修改就是封闭的；而通过面向对象的继承和多态机制，又可以实现对抽象类的继承，通过覆写其方法来改变固有的行为，实现新的拓展方法，所以就是开放的。“需求总是变化”，没有不变的软件，所以就需要用等比开放原则来封闭变化满足需求，同时还能保持软件内部的封装体系稳定，不被需求的变化影响。</p><h3 id="Liskov替换原则"><a href="#Liskov替换原则" class="headerlink" title="Liskov替换原则"></a>Liskov替换原则</h3><p>里氏替换原则的核心思想是：子类必须能够替换其基类。这一思想体现为对继承机制的约束规范，只有子类能够替换基类时，才能保证系统在运行期内识别子类，这是保证继承复用的基础。在父类和子类的具体行为中，必须严格把握继承层次中的关系和特征，将基类替换为子类，程序的行为不会发生任何变化。同时，这一约束反过来则是不成立的，子类可以替换积累，但是基类不一定能替换子类。里氏替换原则，主要着眼于对抽象和多态建立在继承的基础上，因此只有遵了里氏替换原则，才能保证继承服用是可靠的。实现的方法是面向接口编程：将公共部分抽象为基类接口或抽象类，通过<code>Extract Abstract Class</code>，在子类中通过覆写父类的方法实现新的方式支持同样的职责。里氏替换原则是关于继承机制的设计原则，违反里氏替换原则就必然导致违反开放-封闭原则。里氏替换原则能够保证系统具有良好的拓展性，同时实现基于多态的抽象机制，能够减少代码冗余，避免运行期的类型判别。</p><h3 id="依赖倒置原则"><a href="#依赖倒置原则" class="headerlink" title="依赖倒置原则"></a>依赖倒置原则</h3><p>其核心思想是：依赖于抽象。具体而言就是高层模块不依赖于底层模块，二者都同时依赖于抽象；抽象不依赖于具体，具体依赖于抽象。我们知道，类一定会存在类与类、模块与模块之间。当两个模块之间存在紧密的耦合关系时，最好的方法就是分离接口和实现：在依赖之间定义一个抽象的接口，以此来邮箱控制耦合关系，达到依赖于抽象的设计目标。抽象的稳定性决定了系统的稳定性，因为抽象是不变的，依赖于抽象是一个通用的原则，而某些时候依赖于细节则是在所难免的，必须权衡在抽象和具体之间的取舍，方法不是一成不变的。依赖于抽象，就是对接口编程，不要对实现编程。</p><h3 id="接口隔离原则"><a href="#接口隔离原则" class="headerlink" title="接口隔离原则"></a>接口隔离原则</h3><p>其核心思想是：使用多个小的专门的接口，而不要使用一个大的总接口。具体而言，接口隔离原则体现在：接口应该是内聚的，应该避免“胖”的接口。一个类对另外一个类的依赖应该建立在最小的接口上，不要强迫依赖不用的方法，这是一种接口污染。接口有效地将细节和抽象隔离，体现了对抽象编程的一切好处，接口隔离强调接口的单一性。而“胖”接口存在明显的弊端，会导致实现的类型并非需要所有的接口定义，这在设计上这是浪费，而且在实施上这会带来潜在的问题，对“胖”接口的修改将导致一连串的客户端程序需要修改，有时候这是一种灾难。在这种情况下将“胖”接口分解为多个特点的定制化方法，使得客户端仅仅依赖于它们的实际调用的方法，从而解除了客户端不会依赖于他们不用的方法。分离的手段主要有以下两种：</p><ul><li>委托分离。通过增加一个新的类型来委托客户的请求，隔离客户和接口的直接以来，但是会增加系统的开销。</li><li>多重继承分离。通过接口多继承来实现客户的需求，这种方法是较好的。</li></ul><p>以上就是五个基本的面向对象设计原则，他们就像面向对象程序设计中的金科玉律，遵守他们可以使我们的代码更加鲜活，易于复用，易于拓展，灵活优雅。不同的设计模式对应不同的需求，而设计原则则代表永恒的灵魂，需要在实践中时时刻刻的遵守。就如ARTHUR J.RIEL在那本《OOD启示录》中所说的：</p><blockquote><p>你并不必严格遵守这些原则，违背他们也不会被初一宗教刑罚。但是你应当把这些原则看作警铃，若违背了其中一条，那么警铃就会响起</p></blockquote><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul><li>面向对象三大特征：<ul><li><strong>封装(Encapsulation)</strong></li><li><strong>继承(Inheritance)</strong></li><li><strong>多态(Polymorphism)</strong></li></ul></li><li>面向对象五大基本原则：<ul><li><strong>单一职责原则（Single-Resposibility Principle）</strong></li><li><strong>开放封闭原则（Open-Closed principle）</strong></li><li><strong>Liskov替换原则（Liskov-Substitution Principle）</strong></li><li><strong>依赖倒置原则（Dependecy-Inversion Principle）</strong></li><li><strong>接口隔离原则（Interface-Segregation Principle）</strong></li></ul></li></ul><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Dec 13 2019 16:47:29 GMT+0800 (GMT+08:00) --&gt;&lt;blockquote&gt;&lt;p&gt;本文根据&lt;a href=&quot;https://github.com/hollischuang/toBeTopJavaer/&quot; title=&quot;toBeTopJavaer&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;toBeTopJavaer&lt;/a&gt;和《码出高效》补充学习Java&lt;/p&gt;&lt;/blockquote&gt;&lt;h2 id=&quot;面向对象的三大基本特征&quot;&gt;&lt;a href=&quot;#面向对象的三大基本特征&quot; class=&quot;headerlink&quot; title=&quot;面向对象的三大基本特征&quot;&gt;&lt;/a&gt;面向对象的三大基本特征&lt;/h2&gt;&lt;p&gt;传统意义上，面向对象有三大特性：封装、继承、多态。在《码出高效》中，将“抽象”也作为面向对象的特性之一，支持“四大特征”的说法。手册解释道：&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;抽象是程序员的核心素养之一，体现出程序员对业务的建模能力，以及对架构的宏观掌控力。虽然面向过程也需要进行一定的抽象能力，但是相对来说，面向对象思维，以对象模型为核心，丰富模型的内涵，扩展模型的外延，通过模型的行为组合去共同解决某一类问题，抽象能力显得尤为重要。&lt;/p&gt;&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="Java之路" scheme="https://www.royians.cn/categories/Java%E4%B9%8B%E8%B7%AF/"/>
    
    
      <category term="Java" scheme="https://www.royians.cn/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Java和C++的区别</title>
    <link href="https://www.royians.cn/2019/11.19.23f0b989/"/>
    <id>https://www.royians.cn/2019/11.19.23f0b989/</id>
    <published>2019-11-19T01:16:55.000Z</published>
    <updated>2019-11-27T07:03:15.316Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Dec 13 2019 16:47:29 GMT+0800 (GMT+08:00) --><blockquote><p>本文根据<a href="https://snailclimb.top/JavaGuide/" title="Java Guide" target="_blank" rel="noopener">Java Guide</a>补充学习Java，因此有Java Guide标签的文章内容大多引用自Java Guide</p></blockquote><p>Java语言是由C++发展而来的，保留大部分C++的内容，编程方式也类似于C++。但是Java的语法更清晰、规模更小、更易学。Sun公司对多种程序设计语言进行了深入研究，并摒弃了其它语言的不足之处，最终推出了Java。正是这样，<a id="more"></a>Java 从根本上解决了C++的固有缺陷，形成了一种新的完全面向对象的语言。Java和C/C++的相似之处多于不同之处，这里列出一些显著的区别。</p><h2 id="指针"><a href="#指针" class="headerlink" title="指针"></a>指针</h2><p>Java没有指针的概念，从而有效地防止了C/C++语言中，容易出现的指针操作失误（如指针悬空所造成的系统崩溃）。在C/C++中，指针操作内存时，经常会出现错误。在Java中没有指针，更有利于Java程序的安全。</p><h2 id="多重继承"><a href="#多重继承" class="headerlink" title="多重继承"></a>多重继承</h2><p>C++支持多重继承，它允许多个父类派生出一个子类。也就是说，一个类允许继承多个父类。尽管多重继承功能很强，但使用复杂，而且会引出许多麻烦，编译程序实现他也很不容易。所以Java不支持多重继承，但允许一个类实现多个接口。可见，Java既实现了C++多重继承的功能，又避免了C++的许多缺陷。</p><h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><p>Java是完全面向对象的语言，所有的方法和数据都必须是类的一部分。除了基本数据类型之外，其余类型的数据都作为对象型数据。例如对象型数据包括字符串和数组。类将数据和方法结合起来，把他们封装在其中，这样每个对象都可以实现具有自己特点的行为。而C++将函数和变量定义为全局的，然后再来调用这些函数和变量，从而增加了程序的负担。此外Java还取消了C/C++中的结构和联合，使编译程序更加简洁。</p><h2 id="自动内存管理"><a href="#自动内存管理" class="headerlink" title="自动内存管理"></a>自动内存管理</h2><p>Java程序中的所有对象都是使用new操作符建立在堆栈上的，这个操作符类似于C++的new操作符。Java自动进行无用内存回收操作，不需要程序员进行删除。当Java中的一个对象不再被用到时，无需使用内存回收器，只需要给他加上标签以示删除。无用内存的回收器在后台运行，利用哦哪个先实践工作。而C++中必须有程序释放内存资源，增加了程序设计者的负担。</p><h2 id="操作符重载"><a href="#操作符重载" class="headerlink" title="操作符重载"></a>操作符重载</h2><p>Java不支持操作符重载，操作符重载被认为是C++的突出特征。在Java中虽然类可以实现这样的功能，但不支持操作符重载，这样是为了保持Java的语言尽可能的简单。</p><h2 id="预处理功能"><a href="#预处理功能" class="headerlink" title="预处理功能"></a>预处理功能</h2><p>C/C++在编译过程中都有一个与编译阶段，即预处理器。预处理器为开发人员提供了方便，但增加了编译的复杂性。Java允许预处理，但不支持预处理器功能，因为Java没有预处理器，所以为了实现与处理，它提供了引入语句（import），它与C++预处理器的功能类似。</p><h2 id="Java-不支持缺省函数参数，而-C-支持"><a href="#Java-不支持缺省函数参数，而-C-支持" class="headerlink" title="Java 不支持缺省函数参数，而 C++支持"></a>Java 不支持缺省函数参数，而 C++支持</h2><p>在 C 中，代码组织在函数中，函数可以访问程序的全局变量。C++增加了类，提供了类算法，该算法是与类相连的函数，C++类方法与 Java 类方法十分相似。由于 C++仍然支持 C，所以 C++程序中仍然可以使用 C 的函数，结果导致函数和方法混合使用，使得 C++程序比较混乱。Java 没有函数，作为一个比 C++更纯的面向对象的语言。Java 强迫开发人员把所有例行程序包括在类中。事实上，用方法实现例行程序可激励开发人员更好地组织编码。</p><h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><p>C和C++不支持字符换变量，在C和C++程序中使用Null终止符代表字符串的结束，在Java中字符串使用类对象（String和StringBuffer）来实现的，在整个系统中建立字符串和访问字符串元素的方法是一致的。Java字符串类是作为Java语言的一部分定义的，而不是作为外加的延伸部分。此外，Java还可以对字符串用+进行连接操作。</p><h2 id="goto语句"><a href="#goto语句" class="headerlink" title="goto语句"></a>goto语句</h2><p>“可怕”的 goto 语句是 C 和 C++的“遗物”。它是该语言技术上的合法部分，引用 goto语句造成了程序结构的混乱，不易理解。goto 语句一般用于无条件转移子程序和多结构分支技术。Java 不提供 goto 语句，其虽然指定 goto 作为关键字，但不支持它的使用，这使程序更简洁易读。</p><h2 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h2><p>在 C 和 C++中，有时出现数据类型的隐含转换，这就涉及了自动强制类型转换问题。例如，在 C++中可将一个浮点值赋予整型变量，并去掉其尾数。Java 不支持 C++中的自动强制类型转换，如果需要，必须由程序显式进行强制类<br>型转换。</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul><li>都是面向对象的语言，都支持封装、继承和多态</li><li>Java 不提供指针来直接访问内存，程序内存更加安全</li><li>Java 的类是单继承的，C++ 支持多重继承；虽然 Java 的类不可以多继承，但是接口可以多继承。</li><li>Java 有自动内存管理机制，不需要程序员手动释放无用内存</li><li>Java为解释性语言,其运行过程为:程序源代码经过Java编译器编译成字节码,然后由JM解释执行。而C/C++为编译型语言,源代码经过编译和链接后生成可执行的二进制代码。因此,Java的执行速度比C/C++慢,但是Java能够跨平台执行,而C/C++不能。</li><li>Java为纯面向对象语言,所有代码(包括函数、变量等)必须在类中实现,除基本数据类型(包括int、foat等)外,所有类型都是类。此外,Java语言中不存在全局变量或全局函数,而C++兼具面向过程和面向过程编程的特点,可以定义全局变量和全局函数。</li><li>与C/C++语言相比,Java语言中没有指针的概念,这有效防止了C/C++语言中操作指针可能引起的系统问题,从而使程序变得更加安全</li><li>与C++语言相比,Java语言不支持多重继承,但是Java语言引入了接口的概念,可以同时实现多个接口。由于接口也具有多态特性,因此在Java语言中可以通过实现多个接口来实现与C++语言中多重继承类似的目的。</li><li>在C++语言中,需要开发人员去管理对内存的分配(包括申请与释放),而Java语言提供了垃圾回收器来实现垃圾的自动回收,不需要程序显式地管理内存的分配。在C++语言中,通常都会把释放资源的代码放到析构函数中,Java语言中虽然没有析构函数,但却引入了一个 finalize()方法,当垃圾回收器将要释放无用对象的内存时,会首先调用该对象的 finalize()方法,因此,开发人员不需要关心也不需要知道对象所占的内存空间何时会被释放</li><li>C++语言支持运算符重载,而Java语言不支持运算符重载。</li><li>C++语言支持预处理,而Java语言没有预处理器,虽然不支持预处理功能(包括头文件、宏定义等),但它提供的import机制与C++中的预处理器功能类似。</li><li>C++支持默认函数参数,而Java不支持默认函数参数。</li><li>C/C++支持goto语句,而Java不提供goto语句(但Java中goto是保留关键字)。</li><li>C/C++支持自动强制类型转换,这会导致程序的不安全;而Java不支持自动强制类型转换,必须由开发人员进行显式地强制类型转换。</li><li>C/C++中,结构和联合的所有成员均为公有,这往往会导致安全性问题的发生,而Java根本就不包含结构和联合,所有内容都封装在类里</li><li>Java具有平台无关性,即对每种数据类型都分配固定长度,例如,int类型总是占据32位,而C/C++却不然,同一个数据类型在不同的平台上会分配不同的字节数</li><li>Java提供对注释文档的内建支持,所以源码文件也可以包含它们自己的文档。通过一个单独的程序,这些文档信息可以提取出来,并重新格式化成HTML。</li><li>Java包含了一些标准库,用于完成特定的任务,同时这些库简单易用,能够大大缩短开发周期,例如,Java提供了用于访问数据库的JDBC库,用于实现分布式对象的RMI等标准库C++则依靠一些非标准的、由其他厂商提供的库。</li></ul><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a href="https://www.jianshu.com/p/e14d9b380ddb" title="作者：南城无霜 来源：简书" target="_blank" rel="noopener">JAVA与C，C++的区别</a><br><a href="https://www.jianshu.com/p/2e3bccad112d" title="作者：月影诉残心 来源：简书" target="_blank" rel="noopener">T-15- Java 基础知识 | Java 与 C++区别</a></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Dec 13 2019 16:47:29 GMT+0800 (GMT+08:00) --&gt;&lt;blockquote&gt;&lt;p&gt;本文根据&lt;a href=&quot;https://snailclimb.top/JavaGuide/&quot; title=&quot;Java Guide&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Java Guide&lt;/a&gt;补充学习Java，因此有Java Guide标签的文章内容大多引用自Java Guide&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;Java语言是由C++发展而来的，保留大部分C++的内容，编程方式也类似于C++。但是Java的语法更清晰、规模更小、更易学。Sun公司对多种程序设计语言进行了深入研究，并摒弃了其它语言的不足之处，最终推出了Java。正是这样，
    
    </summary>
    
    
      <category term="Java之路" scheme="https://www.royians.cn/categories/Java%E4%B9%8B%E8%B7%AF/"/>
    
    
      <category term="Java" scheme="https://www.royians.cn/tags/Java/"/>
    
      <category term="Java Guide" scheme="https://www.royians.cn/tags/Java-Guide/"/>
    
  </entry>
  
  <entry>
    <title>JVM还支持哪些语言</title>
    <link href="https://www.royians.cn/2019/11.18.9867c63d/"/>
    <id>https://www.royians.cn/2019/11.18.9867c63d/</id>
    <published>2019-11-18T08:11:32.000Z</published>
    <updated>2019-11-27T07:03:15.325Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Dec 13 2019 16:47:29 GMT+0800 (GMT+08:00) --><p>JVM虚拟机并不是只支持Java语言的，你可以选择多种多样JVM编程语言去实现你的项目。这些语言最终都会被编译为字节码存储到JVM能够执行的字节码文件中去。最终，这些编程语言都会在现成的JVM上得到有效的优化。</p><a id="more"></a><p>这些JVM编程语言被分为三类：那些拥有Java不曾拥有的特性的语言；那些从现有语言移植到JVM的语言，那些research languages。</p><h2 id="第一个分类"><a href="#第一个分类" class="headerlink" title="第一个分类"></a>第一个分类</h2><p>第一个分类描述的是一些包含了比Java语言更多特性的语言，能够让程序员用更简洁的代码来编写程序。Java SE8 引入了lambda表达式、Stream API和默认方法（default methods，暂译）来解决代码简洁的问题。然而，开发者还喜欢很多其他的特性，比如字符集合（collections literals）、字符匹配（pattern matching）和更复杂的类型推断（more sophisticated type inference），这些特性在Java中还没有。</p><p>而属于第一类语言的就有 Scala, Groovy, Xtend, Ceylon, Kotlin, 和 Fantom几种。</p><h2 id="第二个分类"><a href="#第二个分类" class="headerlink" title="第二个分类"></a>第二个分类</h2><p>第二个分类中的语言是移植到JVM的已知语言，比如Python和Ruby，他们都可以和Java API进行交互，并且在脚本编写和快速原型设计方面很受欢迎。</p><p>Python（CPython）和Ruby（Ruby MRI）的标准实现均具有全局解释器锁，这会阻止它们充分利用多核系统。然而Jython和JRuby（Python和Ruby在JVM上的实现），通过使用Java的线程来摆脱了这种限制。</p><p>另一个广受欢迎的移植到JVM上的语言是Clojure（一种Lisp的衍生语言（a dialect of Lisp，暂译）），我们将在本文中介绍。另外，Oracle最近发布了Nashorn，该项目使您可以在JVM上运行JavaScript。</p><h2 id="第三个分类"><a href="#第三个分类" class="headerlink" title="第三个分类"></a>第三个分类</h2><p>第三类是实现新研究思想，仅适用于特定领域或只是实验性的语言。我们将在本文中介绍的语言X10是为实现高性能并行计算的高效编程而设计的。此类别中的另一种语言是Oracle Labs的Fortress，现已停产。</p><p>对于上文提到的每种语言，下面都会提供一个简单概览，以使您了解该语言支持什么以及如何使用它。</p><h2 id="语言概览"><a href="#语言概览" class="headerlink" title="语言概览"></a>语言概览</h2><h3 id="1-Scala"><a href="#1-Scala" class="headerlink" title="1 | Scala"></a>1 | Scala</h3><p><a href="//www.scala-lang.org/">Scala</a> is a statically typed programming language that fuses the object-oriented model and functional programming ideas. That means, in practice, that you can declare classes, create objects, and call methods just like you would typically do in Java. However, Scala also brings popular features from functional programming languages such as pattern matching on data structures, local type inference, persistent collections, and tuple literals.</p><p>The fusion of object-oriented and functional features lets you use the best tools from both worlds to solve a particular problem. As a result, Scala often lets programmers express algorithms more concisely than in Java.</p><p><strong>Feature focus: pattern matching.</strong> To illustrate, take a tree structure that you would like to traverse. <strong>Listing 1</strong> shows a simple expression language consisting of numbers and binary operations.</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">Java</span>]</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Expr</span> </span>&#123; ... &#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Number</span> <span class="keyword">extends</span> <span class="title">Expr</span> </span>&#123; int <span class="keyword">val</span>; ... &#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BinOp</span> <span class="keyword">extends</span> <span class="title">Expr</span> </span>&#123; <span class="type">String</span> opname; <span class="type">Expr</span> left, right; ... &#125;</span><br></pre></td></tr></table></figure><p><strong>Listing 1</strong></p><p>Say you’re asked to write a method to simplify some expressions. For example “5 / 1” can be simplified to “5.” The tree for this expression is illustrated in <strong>Figure 1</strong>.</p><p><img alt="Architect-languages-f1" data-src="//www.oracle.com/ocom/groups/public/@otn/documents/digitalasset/2267342.jpg"></p><p><strong>Figure 1</strong></p><p>In Java, you could deconstruct this tree representation by using <code>instanceof</code>, as shown in <strong>Listing 2</strong>. Alternatively, a common design pattern for separating an algorithm from its domain is the visitor design pattern, which can alleviate some of the verbosity. See <strong>Listing 3</strong>.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[Java]</span><br><span class="line"></span><br><span class="line"><span class="function">Expr <span class="title">simplifyExpression</span><span class="params">(Expr expr)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (expr <span class="keyword">instanceof</span> BinOp</span><br><span class="line">          &amp;&amp; <span class="string">"/"</span>.equals(((BinOp)expr).opname)</span><br><span class="line">          &amp;&amp; ((BinOp)expr).right <span class="keyword">instanceof</span> Number</span><br><span class="line">          &amp;&amp; ... <span class="comment">// it’s all getting very clumsy</span></span><br><span class="line">          &amp;&amp; ... ) &#123;</span><br><span class="line">        <span class="keyword">return</span> (Binop)expr.left;</span><br><span class="line">     &#125;</span><br><span class="line">     ... <span class="comment">// other simplifications</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Listing 2</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[Java]</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimplifyExprVisitor</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Expr <span class="title">visit</span><span class="params">(BinOp e)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">"/"</span>.equals(e.opname) &amp;&amp; </span><br><span class="line">e.right <span class="keyword">instanceof</span> Number &amp;&amp; ...)&#123;</span><br><span class="line">            <span class="keyword">return</span> e.left;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> e;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Listing 3</strong></p><p>However, this pattern introduces a lot of boilerplate. First, domain classes need to provide an <code>accept</code> method to use a visitor. You then need to implement the “visit” logic.</p><p>In Scala, the same problem can be tackled using pattern matching. See <strong>Listing 4</strong>.</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">Scala</span>]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">simplifyExpression</span></span>(expr: <span class="type">Expr</span>): <span class="type">Expr</span> = expr <span class="keyword">match</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">BinOp</span>(<span class="string">"+"</span>, e, <span class="type">Number</span>(<span class="number">0</span>)) =&gt; e   <span class="comment">// Adding zero</span></span><br><span class="line">    <span class="keyword">case</span> <span class="type">BinOp</span>(<span class="string">"*"</span>, e, <span class="type">Number</span>(<span class="number">1</span>)) =&gt; e   <span class="comment">// Multiplying by one</span></span><br><span class="line">    <span class="keyword">case</span> <span class="type">BinOp</span>(<span class="string">"/"</span>, e, <span class="type">Number</span>(<span class="number">1</span>)) =&gt; e   <span class="comment">// Dividing by one</span></span><br><span class="line">    <span class="keyword">case</span> _ =&gt; expr                       <span class="comment">// Can’t simplify expr</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Listing 4</strong></p><h3 id="2-Groovy"><a href="#2-Groovy" class="headerlink" title="2 | Groovy"></a>2 | Groovy</h3><p>Groovy is a dynamically typed object-oriented language. Groovy’s dynamic nature lets you manipulate your code in powerful ways. For example, you can expand objects at runtime (for example, by adding fields or methods).</p><p>However, Groovy also provides optional static checking, which means that you can catch errors at compile time (for example, calling an undefined method will be reported as an error before the program runs, just as in Java). As a result, programmers who feel that they are more productive without types getting in their way can embrace Groovy’s dynamic nature. Nonetheless, they can also opt to gradually use static checking later if they wish. In addition, Groovy is friendly to Java programmers because almost all Java code is also valid Groovy code, so the learning curve is small.</p><p><strong>Feature focus: safe navigation.</strong> Groovy has many features that let you write more-concise code compared to Java. One of them is the <em>safe navigation operator</em>, which prevents a <code>NullPointerException</code>. In Java, dealing with null can be cumbersome. For example, the following code might result in a <code>NullPointerException</code> if either <code>person</code> is null or <code>getCar()</code> returns null:</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Insurance carInsurance = </span><br><span class="line">person.getCar().getInsurance();</span><br></pre></td></tr></table></figure><p>To prevent an unintended <code>NullPointerException</code>, you can be defensive and add checks to prevent null dereferences, as shown in <strong>Listing 5</strong>.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[Java]</span><br><span class="line"></span><br><span class="line">Insurance carInsurance = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">if</span>(person != <span class="keyword">null</span>)&#123;</span><br><span class="line">    Car car = person.getCar();</span><br><span class="line">    <span class="keyword">if</span>(car != <span class="keyword">null</span>)&#123;</span><br><span class="line">        carInsurance = </span><br><span class="line">            car.getInsurance();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Listing 5</strong></p><p>However, the code quickly becomes ugly because of the nested checks, which also decrease the code’s readability. The safe navigation operator, which is represented by <code>?.</code>, can help you navigate safely through potential null references:</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> carInsurance = </span><br><span class="line">person?.getCar()?.getInsurance()</span><br></pre></td></tr></table></figure><p>In this case, the variable <code>carInsurance</code> will be null if <code>person</code> is null, <code>getCar()</code> returns null, or <code>getInsurance()</code> returns null. However, no <code>NullPointerException</code> is thrown along the way.</p><h3 id="3-Clojure"><a href="#3-Clojure" class="headerlink" title="3 | Clojure"></a>3 | Clojure</h3><p><a href="//www.clojure.org/">Clojure</a> is a dynamically typed programming language that can be seen as a modern take on Lisp. It is radically different from what object-oriented programmers might be used to. In fact, Clojure is a fully functional programming language, and as a result, it is centered on immutable data structures, recursion, and functions.</p><p><strong>Feature focus: homoiconicity.</strong> What differentiates Clojure from most languages is that it’s a <em>homoiconic</em> language. That is, Clojure code is represented using the language’s fundamental datatypes—for example, lists, symbols, and literals—and you can manipulate the fundamental datatypes using built-in constructs. As a consequence, Clojure code can be elegantly manipulated and transformed by reusing the built-in constructs.</p><p>Clojure has a built-in <code>if</code> construct. It works like this. Let’s say you want to extend the language with a new construct called <code>unless</code> that should work like an inverted <code>if</code>. In other words, if the condition that is passed as an argument evaluates to <code>false</code>, Clojure evaluates the first branch. Otherwise—if the argument evaluates to <code>true</code>—Clojure evaluates the second branch. You should be able to call the <code>unless</code> construct as shown in <strong>Listing 6</strong>.</p><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[Clojure]</span><br><span class="line"></span><br><span class="line">(<span class="name">unless</span> <span class="literal">false</span> (<span class="name">println</span> <span class="string">"ok!!"</span>) (<span class="name">println</span> <span class="string">"boo!!"</span>)) </span><br><span class="line"><span class="comment">; prints "ok!!"</span></span><br><span class="line"></span><br><span class="line">(<span class="name"><span class="builtin-name">if</span></span> <span class="literal">false</span> (<span class="name">println</span> <span class="string">"boo!!"</span>) (<span class="name">println</span> <span class="string">"ok!!"</span>)) </span><br><span class="line"><span class="comment">; prints "ok!!"</span></span><br></pre></td></tr></table></figure><p><strong>Listing 6</strong></p><p>To achieve the desired result you can define a macro that transforms a call to <code>unless</code> to use the construct <code>if</code>, but with its branch arguments reversed (in other words, swap the first branch and the second branch). In Clojure, you can manipulate the code representing the branches that are passed as an argument as if it were data. See <strong>Listing 7</strong>.</p><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[Clojure]</span><br><span class="line"></span><br><span class="line">(<span class="name"><span class="builtin-name">defmacro</span></span> unless</span><br><span class="line">  <span class="string">"Inverted 'if'"</span></span><br><span class="line">  [condition &amp; branches]</span><br><span class="line">  (<span class="name"><span class="builtin-name">conj</span></span> (<span class="name"><span class="builtin-name">reverse</span></span> branches) condition 'if))</span><br></pre></td></tr></table></figure><p><strong>Listing 7</strong></p><p>In this macro definition, the symbol <code>branches</code> consists of a list that contains the two expressions representing the two branches to execute (<code>println &quot;boo!!&quot;</code> and <code>println &quot;ok!!&quot;</code>). With this list in hand, you can now produce the code for the <code>unless</code> construct. First, call the core function <code>reverse</code> on that list. You’ll get a new list with the two branches swapped. You can then use the core function <code>conj</code>, which when given a list, adds the remaining arguments to the front of the list. Here, you pass the <code>if</code> operation together with the condition to evaluate.</p><h3 id="4-Kotlin"><a href="#4-Kotlin" class="headerlink" title="4 | Kotlin"></a>4 | Kotlin</h3><p><a href="//kotlinlang.org/">Kotlin</a> is a statically typed object-oriented language. Its main design goals are to be compatible with Java’s API, have a type system that catches more errors at compile time, and be less verbose than Java. Kotlin’s designers say that Scala is a close choice to match its design goals, but they dislike Scala’s complexity and long compilation time compared to Java. Kotlin aims to tackle these issues.</p><p><strong>Feature focus: smart casts.</strong> Many developers see the Java cast feature as annoying and redundant. For an example, see <strong>Listing 8</strong>.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[Java]</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(expr <span class="keyword">instanceof</span> Number)&#123;</span><br><span class="line">    System.out.println(((Number) expr).getValue());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Listing 8</strong></p><p>Repeating the cast to <code>Number</code> shouldn’t be necessary, because within the <code>if</code> block, <code>expr</code> has to be an instance of <code>Number</code>. The generality of this technique is called _flow typing_—type information propagates with the flow of the program.</p><p>Kotlin supports <em>smart casts</em>. That is, you don’t have to cast the expression within the <code>if</code> block. See <strong>Listing 9</strong>.</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[Kotlin]</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(expr <span class="keyword">is</span> Number)&#123;</span><br><span class="line">    println(expr.getValue())</span><br><span class="line"><span class="comment">// expr is automatically cast to Number</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Listing 9</strong></p><h3 id="5-Ceylon"><a href="#5-Ceylon" class="headerlink" title="5 | Ceylon"></a>5 | Ceylon</h3><p>Red Hat developed <a href="https://ceylon-lang.org/" target="_blank" rel="noopener">Ceylon</a>, a statically typed object-oriented language, to give Java programmers a language that’s easy to learn and understand (because of syntax that’s similar to Java) but less verbose. Ceylon includes more type system features than Java. For example, Ceylon supports a construct for defining type aliases (similar to C’s <code>typedef;</code> for example, you could define <code>Strings</code> to be an alias for <code>List&lt;String&gt;</code>), flow typing (for example, no need to cast the type of an expression in a block if you’ve already done an <code>instanceof</code> check on it), union of types, and local type inference. In addition, in Ceylon you can ask certain variables or blocks of code to use dynamic typing—type checking is performed at runtime instead of compile time.</p><p><strong>Feature focus: for comprehensions.</strong><code>for</code> comprehensions can be seen as syntactic sugar for a chain of <code>map</code>, <code>flatMap</code>, and <code>filter</code> operations using Java SE 8 streams. For example, in Java, by combining a range and a <code>map</code> operation, you can generate all the numbers from 2 to 20 with a step value of <code>2</code>, as shown in <strong>Listing 10</strong>.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[Java]</span><br><span class="line"></span><br><span class="line">List&lt;Integer&gt; numbers = IntStream.rangeClosed(<span class="number">1</span>, <span class="number">10</span>).mapToObj(</span><br><span class="line">x -&gt; x * <span class="number">2</span>).collect(toList());</span><br></pre></td></tr></table></figure><p><strong>Listing 10</strong></p><p>In Ceylon, it can be written as follows using a <code>for</code> comprehension:</p><figure class="highlight ceylon"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; numbers = </span><br><span class="line">[<span class="keyword">for</span> (x <span class="keyword">in</span> <span class="number">1</span>...<span class="number">10</span>) x * <span class="number">2</span>];</span><br></pre></td></tr></table></figure><p>Here’s a more-complex example. In Java, you can generate a list of points in which the sum of the <code>x</code> and <code>y</code> coordinates is equal to <code>10</code>. See <strong>Listing 11</strong>.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[Java]</span><br><span class="line"></span><br><span class="line">List&lt;Point&gt; points = IntStream.rangeClosed(<span class="number">1</span>, <span class="number">10</span>).boxed()</span><br><span class="line">.flatMap(x -&gt; IntStream.rangeClosed(<span class="number">1</span>, <span class="number">10</span>)</span><br><span class="line">  .filter(y -&gt; x + y == <span class="number">10</span>)</span><br><span class="line">  .mapToObj(y -&gt; <span class="keyword">new</span> Point(x, y)))</span><br><span class="line">  .collect(toList());</span><br></pre></td></tr></table></figure><p><strong>Listing 11</strong></p><p>Thinking in terms of <code>flatMap</code> and <code>map</code> operations using the Stream API might be overwhelming. Instead, in Ceylon, you can write more simply, as done in the code shown in <strong>Listing 12</strong>, which produces <code>[(1, 9), (2, 8), (3, 7), (4, 6), (5, 5), (6, 4), (7, 3), (8, 2), (9, 1)]</code>.</p><figure class="highlight ceylon"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[Ceylon]</span><br><span class="line">List&lt;Point&gt; points = </span><br><span class="line">   [<span class="keyword">for</span> (x <span class="keyword">in</span> <span class="number">1</span>..<span class="number">10</span>) <span class="keyword">for</span>(y <span class="keyword">in</span> <span class="number">1</span>..<span class="number">10</span>) </span><br><span class="line">   <span class="keyword">if</span>(x+y == <span class="number">10</span>) Point(x, y)];</span><br></pre></td></tr></table></figure><p><strong>Listing 12</strong></p><p>The result: Ceylon can make your code more concise.</p><h3 id="6-Xtend"><a href="#6-Xtend" class="headerlink" title="6 | Xtend"></a>6 | Xtend</h3><p><a href="https://www.eclipse.org/xtend/" target="_blank" rel="noopener">Xtend</a> is a statically typed object-oriented language. One way it differs from other languages is that it compiles to pretty-printed Java code rather than bytecode. As a result, you can also work with the generated code.</p><p>Xtend supports two forms of method invocation: default Java dispatching and multiple dispatching. With multiple dispatching, an overloaded method is selected based on the runtime type of its arguments (instead of the traditional static types of the arguments, as in Java). Xtend provides many other popular features available in other languages such as operator overloading and type inference.</p><p>One unique feature is template expressions, which are a convenient way to generate string concatenation (similar to what template engines provide). For example, template expressions support control-flow constructs such as <code>IF</code> and <code>FOR</code>. In addition, special processing of white space allows templates to be readable and their output to be nicely formatted.</p><p><strong>Feature focus: active annotations.</strong> Xtend provides a feature called active annotations, which is a way to do compile-time metaprogramming. In its simplest form, this feature allows you to generate code transparently, such as adding methods or fields to classes with seamless integration in the Eclipse IDE for example. New fields or meth-ods will show up as members of the modified classes within the Eclipse environment. More-advanced use of this feature can generate a skeleton of design patterns such as the visitor or observer pattern. You can provide your own way to generate code using template expressions.</p><p>Here’s an example to illustrate this feature in action. Given sample JSON data, you can automatically generate a domain class in your Xtend program that maps JSON properties into members. The Eclipse IDE will recognize these members, so you can use features such as type checking and autocompletion. All you have to do is wrap the JSON sample within an <code>@Jsonized</code> annotation. <strong>Figure 2</strong> shows an example within the Eclipse IDE using a JSON sample representing a tweet.</p><p><img alt="Architect-languages-f2" data-src="https://www.oracle.com/ocom/groups/public/@otn/documents/digitalasset/2267343.jpg"></p><p><strong>Figure 2</strong></p><h3 id="7-Fantom"><a href="#7-Fantom" class="headerlink" title="7 | Fantom"></a>7 | Fantom</h3><p><a href="https://www.fantom.org/" target="_blank" rel="noopener">Fantom</a> is an object-oriented language featuring a type system that takes an alternative view compared to most other established, statically typed languages. First, it differentiates itself by not supporting user-defined generics. However, three built-in classes can be parameterized: <code>List</code>, <code>Map</code>, and <code>Func</code>. This design decision was made to let programmers benefit from the use of generics (such as working with collections—see the link to an empirical study conducted by Parnin et al. in “Learn More”) without complicating the overall type system. In addition, Fantom provides two kinds of method invocations: one that goes through type checking at compile time (using a dot notation: .) and one that defers checking to runtime (using an arrow notation: <code>-&gt;</code>).</p><p><strong>Feature focus: immutability.</strong> Fantom encourages immutability through language constructs. For example, it supports <code>const</code> classes—once created, an instance is guaranteed to have no state changes. Here’s how it works. You can define a class <code>Transaction</code> prefixed with the <code>const</code> keyword:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const class Transaction &#123;</span><br><span class="line">  const Int value</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>The <code>const</code> keyword ensures that the class declares only fields that are immutable, so you won’t be able to modify the field named <code>value</code> after you instantiate a <code>Transaction</code>. This is not much different than declaring all fields of a class <code>final</code> in Java. However, this feature is particularly useful with nested structures. For example, let’s say the <code>Transaction</code> class is modified to support another field of type <code>Location</code>. The compiler ensures that the <code>location</code> field can’t be reassigned and that the <code>Location</code> class is immutable.</p><p>For instance, the code in <strong>Listing 13</strong> is incorrect and will produce the error <code>Const field &#39;location&#39; has non-const type &#39;hello_0::Location&#39;</code>. Similarly, all classes extending a <code>const</code> class can be only <code>const</code> classes themselves.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[Fantom]</span><br><span class="line"></span><br><span class="line">const class Transaction &#123;</span><br><span class="line">  const Int value</span><br><span class="line">  const Location location := Location(&quot;Cambridge&quot;)</span><br><span class="line">&#125;</span><br><span class="line">class Location&#123;</span><br><span class="line">  Str city</span><br><span class="line">  new make(Str city) &#123; this.city = city &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="8-X10"><a href="#8-X10" class="headerlink" title="8 | X10"></a>8 | X10</h3><p><a href="http://x10-lang.org/" target="_blank" rel="noopener">X10</a> is an experimental object-oriented language that IBM developed. It supports features such as first-class functions and is designed to facilitate efficient programming for high-performance parallel computing.</p><p>To this end, the language is based on a programming model called the <em>partitioned global address space</em>. In this model, each process shares a global address space, and slices of this space are allocated as private memory for local data and access. To work with this model, X10 offers specialized built-in language constructs to work with concurrency and distributed execution.</p><p>Compared to popular object-oriented languages, a novel feature in its type system is support for <em>constraint types</em>. You can think of constraint types as a form of contracts attached to types. What makes this useful is that errors are checked statically, eliminating the need for more-expensive runtime checks. For example, one possible application of constraint types is to report out-of-bound array accesses at compile time.</p><h2 id="Learn-More"><a href="#Learn-More" class="headerlink" title="Learn More"></a>Learn More</h2><ul><li><strong>“<a href="https://dl.acm.org/citation.cfm?id=1985446" target="_blank" rel="noopener">Java Generics Adoption: How New Features Are Introduced, Championed, or Ignored</a>”</strong></li></ul><p><strong>Feature focus: constraint types.</strong> Consider a simple <code>Pair</code> class, with a generated constructor:</p><p><code>class Pair(x: Long, y: Long){}</code></p><p>You can create <code>Pair</code> objects as follows:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">val p1 : Pair = <span class="keyword">new</span> Pair(<span class="number">2</span>, <span class="number">5</span>);</span><br></pre></td></tr></table></figure><p>However, you can also define explicit constraints (similar to contracts) on the properties of a <code>Pair</code> at use-site. Here, you want to ensure that <code>p2</code> holds only symmetric pairs (that is, the values of <code>x</code> and <code>y</code> must be equal):</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">val p2 : Pair&#123;self.x == self.y&#125; = <span class="keyword">new</span> Pair(<span class="number">2</span>, <span class="number">5</span>);</span><br></pre></td></tr></table></figure><p>Because <code>x</code> and <code>y</code> are different in this code example, the assignment will be reported as a compile error. However, the following code compiles without an error:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">val p2 : Pair&#123;self.x == self.y&#125; = <span class="keyword">new</span> Pair(<span class="number">5</span>, <span class="number">5</span>);</span><br></pre></td></tr></table></figure><h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>In this article, we examined eight features from eight popular JVM languages. These languages provide many benefits, such as enabling you to write code in a more concise way, use dynamic typing, or access popular functional programming features.</p><p>I hope this article has sparked some interest in alternative languages and that it will encourage you to check out the wider JVM eco-system.</p><p><strong>Acknowledgements.</strong> I’d like to thank Alex Buckley, Richard Warburton, Andy Frank, and Sven Efftinge for their feedback.</p><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a href="https://www.oracle.com/technical-resources/articles/java/architect-languages.html" target="_blank" rel="noopener">Alternative Languages for the JVM</a></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Dec 13 2019 16:47:29 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;JVM虚拟机并不是只支持Java语言的，你可以选择多种多样JVM编程语言去实现你的项目。这些语言最终都会被编译为字节码存储到JVM能够执行的字节码文件中去。最终，这些编程语言都会在现成的JVM上得到有效的优化。&lt;/p&gt;
    
    </summary>
    
    
      <category term="Java之路" scheme="https://www.royians.cn/categories/Java%E4%B9%8B%E8%B7%AF/"/>
    
    
      <category term="Java" scheme="https://www.royians.cn/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Oracle JDK 和 Open JDK</title>
    <link href="https://www.royians.cn/2019/11.18.dc6ff3b1/"/>
    <id>https://www.royians.cn/2019/11.18.dc6ff3b1/</id>
    <published>2019-11-18T08:11:32.000Z</published>
    <updated>2019-11-27T07:03:15.405Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Dec 13 2019 16:47:29 GMT+0800 (GMT+08:00) --><blockquote><p>本文根据<a href="https://snailclimb.top/JavaGuide/" title="Java Guide" target="_blank" rel="noopener">Java Guide</a>补充学习Java，因此有Java Guide标签的文章内容大多引用自Java Guide</p></blockquote><p>可能在看这个问题之前很多人和我一样并没有接触和使用过 OpenJDK 。那么Oracle和OpenJDK之间是否存在重大差异？下面我通过收集到的一些资料，为你解答这个被很多人忽视的问题。</p><a id="more"></a><p>对于Java 7，没什么关键的地方。OpenJDK项目主要基于Sun捐赠的HotSpot源代码。此外，OpenJDK被选为Java 7的参考实现，由Oracle工程师维护。关于JVM，JDK，JRE和OpenJDK之间的区别，Oracle博客帖子在2012年有一个更详细的答案：</p><blockquote><p>问：OpenJDK存储库中的源代码与用于构建Oracle JDK的代码之间有什么区别？<br>答：非常接近 - 我们的Oracle JDK版本构建过程基于OpenJDK 7构建，只添加了几个部分，例如部署代码，其中包括Oracle的Java插件和Java WebStart的实现，以及一些封闭的源代码派对组件，如图形光栅化器，一些开源的第三方组件，如Rhino，以及一些零碎的东西，如附加文档或第三方字体。展望未来，我们的目的是开源Oracle JDK的所有部分，除了我们考虑商业功能的部分。</p></blockquote><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ol><li>Oracle JDK大概每6个月发一次主要版本，而OpenJDK版本大概每三个月发布一次。但这不是固定的，我觉得了解这个没啥用处。详情参见：<a href="https://blogs.oracle.com/java-platform-group/update-and-faq-on-the-java-se-release-cadence。" target="_blank" rel="noopener">https://blogs.oracle.com/java-platform-group/update-and-faq-on-the-java-se-release-cadence。</a></li><li>OpenJDK 是一个参考模型并且是完全开源的，而Oracle JDK是OpenJDK的一个实现，并不是完全开源的；</li><li>Oracle JDK 比 OpenJDK 更稳定。OpenJDK和Oracle JDK的代码几乎相同，但Oracle JDK有更多的类和一些错误修复。因此，如果您想开发企业/商业软件，我建议您选择Oracle JDK，因为它经过了彻底的测试和稳定。某些情况下，有些人提到在使用OpenJDK 可能会遇到了许多应用程序崩溃的问题，但是，只需切换到Oracle JDK就可以解决问题；</li><li>在响应性和JVM性能方面，Oracle JDK与OpenJDK相比提供了更好的性能；<br>Oracle JDK不会为即将发布的版本提供长期支持，用户每次都必须通过更新到最新版本获得支持来获取最新版本；</li><li>Oracle JDK根据二进制代码许可协议获得许可，而OpenJDK根据GPL v2许可获得许可。</li></ol><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Dec 13 2019 16:47:29 GMT+0800 (GMT+08:00) --&gt;&lt;blockquote&gt;&lt;p&gt;本文根据&lt;a href=&quot;https://snailclimb.top/JavaGuide/&quot; title=&quot;Java Guide&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Java Guide&lt;/a&gt;补充学习Java，因此有Java Guide标签的文章内容大多引用自Java Guide&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;可能在看这个问题之前很多人和我一样并没有接触和使用过 OpenJDK 。那么Oracle和OpenJDK之间是否存在重大差异？下面我通过收集到的一些资料，为你解答这个被很多人忽视的问题。&lt;/p&gt;
    
    </summary>
    
    
      <category term="Java之路" scheme="https://www.royians.cn/categories/Java%E4%B9%8B%E8%B7%AF/"/>
    
    
      <category term="Java" scheme="https://www.royians.cn/tags/Java/"/>
    
      <category term="Java Guide" scheme="https://www.royians.cn/tags/Java-Guide/"/>
    
  </entry>
  
  <entry>
    <title>JVM、JDK和JRE</title>
    <link href="https://www.royians.cn/2019/11.18.7f3e3da/"/>
    <id>https://www.royians.cn/2019/11.18.7f3e3da/</id>
    <published>2019-11-18T03:54:45.000Z</published>
    <updated>2019-11-27T07:03:15.346Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Dec 13 2019 16:47:29 GMT+0800 (GMT+08:00) --><blockquote><p>本文根据<a href="https://snailclimb.top/JavaGuide/" title="Java Guide" target="_blank" rel="noopener">Java Guide</a>补充学习Java，因此有Java Guide标签的文章内容大多引用自Java Guide</p></blockquote><h2 id="JVM"><a href="#JVM" class="headerlink" title="JVM"></a>JVM</h2><p>JVM（Java Vitural Machain）是运行Java字节码的虚拟机，包括一套字节码指令集、一组寄存器、一个栈、一个垃圾回收、堆和一个存储方法域。JVM是运行在操作系统之上的，它与硬件没有直接的交互。</p><a id="more"></a><p>JVM有针对不同系统的特定实现，目的是使用相同的字节码，他们都会给出相同的结果</p><blockquote><p>在 Java 中，JVM可以理解的代码就叫做字节码（即扩展名为 .class 的文件），它不面向任何特定的处理器，只面向虚拟机。Java 语言通过字节码的方式，在一定程度上解决了传统解释型语言执行效率低的问题，同时又保留了解释型语言可移植的特点。所以 Java 程序运行时比较高效，而且，由于字节码并不针对一种特定的机器，因此，Java程序无须重新编译便可在多种不同操作系统的计算机上运行。</p></blockquote><p>当一个程序从开始运行，这时虚拟机就开始实例化了，多个程序启动就会存在多个虚拟机实例。程序退出或关闭，则虚拟机实例小王，多个虚拟机之间数据不能共享。</p><p><img alt data-src="https://i.loli.net/2019/11/18/wb8ZfYBAvzUkh5Q.png"></p><h2 id="JDK"><a href="#JDK" class="headerlink" title="JDK"></a>JDK</h2><p>JDK是Java Development Kit，它是功能齐全的Java SDK。它拥有JRE所拥有的一切，还有编译器（javac）和工具（如javadoc和jdb）。它能够创建和编译程序。</p><h2 id="JRE"><a href="#JRE" class="headerlink" title="JRE"></a>JRE</h2><p>JRE 是 Java运行时环境。它是运行已编译 Java 程序所需的所有内容的集合，包括 Java虚拟机（JVM），Java类库，java命令和其他的一些基础构件。但是，它不能用于创建新程序。</p><p>如果你只是为了运行一下 Java 程序的话，那么你只需要安装 JRE 就可以了。如果你需要进行一些 Java 编程方面的工作，那么你就需要安装JDK了。但是，这不是绝对的。有时，即使您不打算在计算机上进行任何Java开发，仍然需要安装JDK。例如，如果要使用JSP部署Web应用程序，那么从技术上讲，您只是在应用程序服务器中运行Java程序。那你为什么需要JDK呢？因为应用程序服务器会将 JSP 转换为 Java servlet，并且需要使用 JDK 来编译 servlet。</p><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a href="https://juejin.im/post/59ad4cd56fb9a02477075780#heading-89" target="_blank" rel="noopener">重读 JVM</a></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Dec 13 2019 16:47:29 GMT+0800 (GMT+08:00) --&gt;&lt;blockquote&gt;&lt;p&gt;本文根据&lt;a href=&quot;https://snailclimb.top/JavaGuide/&quot; title=&quot;Java Guide&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Java Guide&lt;/a&gt;补充学习Java，因此有Java Guide标签的文章内容大多引用自Java Guide&lt;/p&gt;&lt;/blockquote&gt;&lt;h2 id=&quot;JVM&quot;&gt;&lt;a href=&quot;#JVM&quot; class=&quot;headerlink&quot; title=&quot;JVM&quot;&gt;&lt;/a&gt;JVM&lt;/h2&gt;&lt;p&gt;JVM（Java Vitural Machain）是运行Java字节码的虚拟机，包括一套字节码指令集、一组寄存器、一个栈、一个垃圾回收、堆和一个存储方法域。JVM是运行在操作系统之上的，它与硬件没有直接的交互。&lt;/p&gt;
    
    </summary>
    
    
      <category term="Java之路" scheme="https://www.royians.cn/categories/Java%E4%B9%8B%E8%B7%AF/"/>
    
    
      <category term="Java" scheme="https://www.royians.cn/tags/Java/"/>
    
      <category term="Java Guide" scheme="https://www.royians.cn/tags/Java-Guide/"/>
    
  </entry>
  
  <entry>
    <title>Java语言有哪些特点</title>
    <link href="https://www.royians.cn/2019/11.18.6ec38e0a/"/>
    <id>https://www.royians.cn/2019/11.18.6ec38e0a/</id>
    <published>2019-11-18T01:12:33.000Z</published>
    <updated>2019-11-27T07:03:15.378Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Dec 13 2019 16:47:29 GMT+0800 (GMT+08:00) --><blockquote><p>本文根据<a href="https://snailclimb.top/JavaGuide/" title="Java Guide" target="_blank" rel="noopener">Java Guide</a>补充学习Java，因此有Java Guide标签的文章内容大多引用自Java Guide</p></blockquote><h2 id="简单易学"><a href="#简单易学" class="headerlink" title="简单易学"></a>简单易学</h2><ol><li>Java的风格类似于C++，因而C++程序员是非常熟悉的。从某种意义上讲，Java语言是C及C++语言的一个变种，因此，C++程序员可以很快就掌握Java编程技术。</li><li>Java摒弃了C++中容易引发程序错误的地方，如指针和内存管理。</li><li>Java提供了丰富的类库。</li></ol><a id="more"></a><h2 id="面向对象（封装，继承，多态）"><a href="#面向对象（封装，继承，多态）" class="headerlink" title="面向对象（封装，继承，多态）"></a>面向对象（封装，继承，多态）</h2><p>传统意义上，面向对象有三大特性：<strong>封装</strong>、<strong>继承</strong>、<strong>多态</strong>。《码出高效》一书中将<strong>抽象</strong>也作为面向对象的三大特性，支持面向对象“四大特性”的说法。虽然面向过程也需要一定的抽象能力，但是相对来说，面向对象思维，以对象模型为核心，丰富模型内涵，扩展模型外延，通过模型的行为组合去共同解决某一类问题，抽象能力显得尤为重要；封装是一种对象功能内聚的表现形式，使模块之间耦合度贬低，更具有维护性；继承使子类能够继承父类，获得父类的部分属性和行为，使模块更有复用性；多态使模块在复用性基础上更加有扩展性，使运行期更有想象空间。</p><h2 id="平台无关性（Java虚拟机实现平台无关性）"><a href="#平台无关性（Java虚拟机实现平台无关性）" class="headerlink" title="平台无关性（Java虚拟机实现平台无关性）"></a>平台无关性（Java虚拟机实现平台无关性）</h2><p>Java是一门跨平台的语言，是平台无关性的，这也是Java语言可以迅速崛起并风光无限的一个重要的原因。</p><p>平台无关性就是一种语言在计算机上运行不受平台的约束，一次编译，到处运行。Java语言是借助class二进制字节码文件实现跨平台的。而class文件也是在对于Java平台无关性的支持中扮演的重要角色之一，除class文件之外，还有Java语言规范、JVM。</p><h3 id="JVM"><a href="#JVM" class="headerlink" title="JVM"></a>JVM</h3><p>对于不同的平台（操作系统、硬件），最主要的区别就是指令不同。比如同样是执行<code>a+b</code>，A平台的指令是<code>10001000</code>，而B平台就是<code>11101110</code>了。想做到跨平台，最重要的就是可以根据对应硬件和操作系统生成对应的二进制指令。</p><p>而这一工作在Java中，就是由JVM完成的。<strong>Java语言是平台无关的，但是JVM是平台有关的</strong>，不同的操作系统要安装不同的JVM。</p><p><img alt data-src="https://i.loli.net/2019/11/18/d2Ky9ILshAjFeMP.png"></p><h3 id="字节码"><a href="#字节码" class="headerlink" title="字节码"></a>字节码</h3><p>各种不同的平台的虚拟机都使用统一的程序存储格式——字节码（ByteCode）是构成平台无关性的另一个基石。Java虚拟机只与由字节码组成的Class文件进行交互。</p><p>我们说Java语言可以Write Once ,Run Anywhere。这里的Write其实指的就是生成Class文件的过程。</p><p>因为Java Class文件可以在任何平台创建，也可以被任何平台的Java虚拟机装载并执行，所以才有了Java的平台无关性。</p><h3 id="Java语言规范"><a href="#Java语言规范" class="headerlink" title="Java语言规范"></a>Java语言规范</h3><p>有了平台对应的不同JVM，和统一的class文件，Java仍然不能彻底实现跨平台，而Java在实现跨平台方面，做出了自己的努力，体现在Java语言规范中。</p><p>C/C++中，基本数据类型是由它的占位宽度决定的，而占位宽度是由平台自己决定的。因此，在不同平台中，对于同一个C/C++程序进行编译会出现不同的行为。</p><p>而在Java中，它的基本数据类型的值域和行为都是由自己定义的。通过保证基本数据类型在所有平台的一致性，Java语言为平台无关性提供了强有力的支持。</p><p><img alt data-src="https://i.loli.net/2019/11/18/bQsfJYHC2rRjO47.png"></p><h2 id="可靠性"><a href="#可靠性" class="headerlink" title="可靠性"></a>可靠性</h2><p>Java致力于检查程序在编译和运行时的错误。类型检查帮助检查出许多开发早期出现的错误。Java自已操纵内存减少了内存出错的可能性。Java还实现了真数组，避免了覆盖数据的可能。这些功能特征大大缩短了开发Java应用程序的周期。Java提供Null指针检测数组边界检测异常出口字节代码校验。</p><p>Java needed to reduce the likelihood of fatal errors from programmer mistakes. With this in mind, object-oriented programming was introduced. When data and its manipulation were packaged together in one place, Java was robust.</p><h2 id="安全性"><a href="#安全性" class="headerlink" title="安全性"></a>安全性</h2><p>Java的安全性可从两个方面得到保证。一方面，在Java语言里，象指针和释放内存等C++功能被删除，避免了非法内存操作。另一方面，当Java用来创建浏览器时，语言功能和浏览器本身提供的功能结合起来，使它更安全。Java语言在你的机器上执行前，要经过很多次的测试。它经过代码校验，检查代码段的格式，检测指针操作，对象操作是否过分以及试图改变一个对象的类型。</p><p>Because Java was originally targeting mobile devices that would be exchanging data over networks, it was built to include a high level of security. Java is probably the most secure programming language to date.</p><h2 id="支持多线程"><a href="#支持多线程" class="headerlink" title="支持多线程"></a>支持多线程</h2><p>C++ 语言没有内置的多线程机制，因此必须调用操作系统的多线程功能来进行多线程程序设计，而 Java 语言却提供了多线程支持</p><blockquote><p>修正（参见：<a href="https://github.com/Snailclimb/JavaGuide/issues/544" target="_blank" rel="noopener">issue#544</a>）：C++11开始（2011年的时候）,C++就引入了多线程库，在windows、linux、macos都可以使用std::thread和std::async来创建线程。<a href="http://www.cplusplus.com/reference/thread/thread/?kw=thread" target="_blank" rel="noopener">参考链接</a></p></blockquote><h2 id="支持网络编程并且很方便"><a href="#支持网络编程并且很方便" class="headerlink" title="支持网络编程并且很方便"></a>支持网络编程并且很方便</h2><p>Java 语言诞生本身就是为简化网络编程设计的，因此 Java 语言不仅支持网络编程而且很方便</p><h2 id="编译与解释并存"><a href="#编译与解释并存" class="headerlink" title="编译与解释并存"></a>编译与解释并存</h2><p>简而言之，Java既是编译型语言又是解释型语言，它通过javac和JIT进行编译，通过JVM进行解释。下面是Java程序从编写到执行的基本过程：</p><ol><li>Programmer write source code and store that into a .java file. Always remember name of your Java source file must be same with the public class declared inside that file, for example if there is public class called Order inside Java file, then it name must be Order.java.</li><li>javac compiles .java fie and creates class files, which contains byte code. This byte code is main reason of Java being platform independent.</li><li>JVM executes these class files and gathers statistics of execution run. These statics are used to determine hot spot i.e. part of your code which executes 90% of time.</li><li>After certain threshold, when JVM has enough data to make decision, JIT compiles frequently used byte codes into native code, which is then directly executed by platform. This provides performance boost to Java application.</li></ol><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ol><li><a href="https://www.cnblogs.com/jay36/p/7762535.html" target="_blank" rel="noopener">JAVA语言主要特点有哪些？</a></li><li><a href="https://mp.weixin.qq.com/s/KIeLngRROEkjRJ5chPE1lw" target="_blank" rel="noopener">Java是如何实现平台无关性（跨平台）的?</a></li><li><a href="https://www.thoughtco.com/what-is-java-2034117" target="_blank" rel="noopener">What Is Java?</a></li><li><a href="https://javarevisited.blogspot.com/2014/06/is-java-interpreted-or-compiled-programming-language.html" target="_blank" rel="noopener">Is Java Compiled or Interpreted Programming language?</a></li></ol><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Dec 13 2019 16:47:29 GMT+0800 (GMT+08:00) --&gt;&lt;blockquote&gt;&lt;p&gt;本文根据&lt;a href=&quot;https://snailclimb.top/JavaGuide/&quot; title=&quot;Java Guide&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Java Guide&lt;/a&gt;补充学习Java，因此有Java Guide标签的文章内容大多引用自Java Guide&lt;/p&gt;&lt;/blockquote&gt;&lt;h2 id=&quot;简单易学&quot;&gt;&lt;a href=&quot;#简单易学&quot; class=&quot;headerlink&quot; title=&quot;简单易学&quot;&gt;&lt;/a&gt;简单易学&lt;/h2&gt;&lt;ol&gt;&lt;li&gt;Java的风格类似于C++，因而C++程序员是非常熟悉的。从某种意义上讲，Java语言是C及C++语言的一个变种，因此，C++程序员可以很快就掌握Java编程技术。&lt;/li&gt;&lt;li&gt;Java摒弃了C++中容易引发程序错误的地方，如指针和内存管理。&lt;/li&gt;&lt;li&gt;Java提供了丰富的类库。&lt;/li&gt;&lt;/ol&gt;
    
    </summary>
    
    
      <category term="Java之路" scheme="https://www.royians.cn/categories/Java%E4%B9%8B%E8%B7%AF/"/>
    
    
      <category term="Java" scheme="https://www.royians.cn/tags/Java/"/>
    
      <category term="Java Guide" scheme="https://www.royians.cn/tags/Java-Guide/"/>
    
  </entry>
  
  <entry>
    <title>面向对象和面向过程的区别</title>
    <link href="https://www.royians.cn/2019/11.15.c24abcdc/"/>
    <id>https://www.royians.cn/2019/11.15.c24abcdc/</id>
    <published>2019-11-15T06:56:09.000Z</published>
    <updated>2019-11-27T07:03:15.332Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Dec 13 2019 16:47:29 GMT+0800 (GMT+08:00) --><p>今天开始根据<a href="https://snailclimb.top/JavaGuide/" title="Java Guide" target="_blank" rel="noopener">Java Guide</a>开始补充学习Java，因此有Java Guide标签的文章内容大多引用自Java Guide</p><p>众所周知，Java是一种面向对象的语言，关于面向过程、面向对象的基本概念等已经是老生常谈的话题了。</p><a id="more"></a><h2 id="什么叫做面向过程"><a href="#什么叫做面向过程" class="headerlink" title="什么叫做面向过程"></a>什么叫做面向过程</h2><p>面向过程编程，英文名是Procedural、Procedure-oriented或者Function-oriented programming，主要是指那些使用顺序、条件、循环这种结构来写的程序，它们解决问题的方法是按照一定顺序的、按照过程一步一步地的去解决。</p><p>例如：把衣服脱下来 -&gt; 找一个盆 -&gt; 放点洗衣粉 -&gt; 加点水 -&gt; 浸泡10分钟 -&gt; 揉一揉 -&gt; 清洗衣服 -&gt; 拧干 -&gt; 晾起来。这个程序强调的是步骤。</p><h2 id="什么叫做面向对象"><a href="#什么叫做面向对象" class="headerlink" title="什么叫做面向对象"></a>什么叫做面向对象</h2><p>面向对象编程（Object-Oriented Programming）是划时代的编程思想变革，推动了高级语言的快速发展和工业化进程。OOP的抽象、封装、继承、多态的理念使软件大规模化成为可能，有效地降低了软件开发成本、维护成本和复用成本<a href="https://github.com/alibaba/p3c" title="节选自《码出高效：Java开发手册》" target="_blank" rel="noopener"><sup>注1</sup></a></p><p>面向对象：把衣服脱下来 -&gt; 打开全自动洗衣机 -&gt; 扔衣服 -&gt; 按钮 -&gt; 晾起来</p><p>面向对象：强调对象，这里的对象就是洗衣机。</p><p>面向对象思想是一种更符合我们思考习惯的思想，它可以将复杂的事情简单化，并将我们从执行者变成了指挥者。</p><h2 id="面向过程和面向对象的优缺点"><a href="#面向过程和面向对象的优缺点" class="headerlink" title="面向过程和面向对象的优缺点"></a>面向过程和面向对象的优缺点</h2><p><strong>面向过程</strong> ：<mark>面向过程性能比面向对象高</mark>。 因为类调用时需要实例化，开销比较大，比较消耗资源，所以当性能是最重要的考量因素的时候，比如单片机、嵌入式开发、Linux/Unix等一般采用面向过程开发。但是，<mark>面向过程没有面向对象易维护、易复用、易扩展。</mark></p><p><strong>面向对象</strong> ：<mark>面向对象易维护、易复用、易扩展</mark>。 因为面向对象有封装、继承、多态性的特性，所以可以设计出低耦合的系统，使系统更加灵活、更加易于维护。但是，<mark>面向对象性能比面向过程低。</mark></p><blockquote><p>这个并不是根本原因，面向过程也需要分配内存，计算内存偏移量，Java性能差的主要原因并不是因为它是面向对象语言，而是Java是半编译语言，最终的执行代码并不是可以直接被CPU执行的二进制机械码。<br>而面向过程语言大多都是直接编译成机械码在电脑上执行，并且其它一些面向过程的脚本语言性能也并不一定比Java好。</p></blockquote><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Dec 13 2019 16:47:29 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;今天开始根据&lt;a href=&quot;https://snailclimb.top/JavaGuide/&quot; title=&quot;Java Guide&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Java Guide&lt;/a&gt;开始补充学习Java，因此有Java Guide标签的文章内容大多引用自Java Guide&lt;/p&gt;&lt;p&gt;众所周知，Java是一种面向对象的语言，关于面向过程、面向对象的基本概念等已经是老生常谈的话题了。&lt;/p&gt;
    
    </summary>
    
    
      <category term="Java之路" scheme="https://www.royians.cn/categories/Java%E4%B9%8B%E8%B7%AF/"/>
    
    
      <category term="Java" scheme="https://www.royians.cn/tags/Java/"/>
    
      <category term="Java Guide" scheme="https://www.royians.cn/tags/Java-Guide/"/>
    
  </entry>
  
  <entry>
    <title>Spring01 初识Spring</title>
    <link href="https://www.royians.cn/2019/11.07.b42bb27/"/>
    <id>https://www.royians.cn/2019/11.07.b42bb27/</id>
    <published>2019-11-07T01:53:42.000Z</published>
    <updated>2019-11-27T07:03:15.385Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Dec 13 2019 16:47:29 GMT+0800 (GMT+08:00) --><h2 id="Spring-Framework-历史"><a href="#Spring-Framework-历史" class="headerlink" title="Spring Framework 历史"></a>Spring Framework 历史</h2><ul><li>诞生于 2002 年，成型于 2003 年，最早的作者为 Rod Johnson<ul><li>Expert One-on-One J2EE Design and Development</li><li>Expert One-on-One J2EE Development without EJB</li></ul></li><li>目前已经发展到 Spring 5.x 版本，支持 JDK-8-11 及 Java EE 8</li><li>现在 Spring 这个词不只代表 Spring 框架，而是整个 Spring 家族</li><li>Spring Framework<ul><li>用于构建企业级应用的轻量级几件事解决方案</li><li>设计理念<ul><li>力争让选择无处不在</li><li>体现海纳百川的精神</li><li>保持向后兼容性</li><li>专注 API 设计</li><li>追求严苛的代码质量</li></ul></li></ul></li><li>SpringBoot<ul><li>快速构建基于Spring的应用程序</li></ul></li><li>Spring Data、 Spring MVC、 Spring WebFlux…</li><li>Spring Cloud<ul><li>简化分布式系统的开发</li></ul></li></ul><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      看极客时间，学习Spring的第一天
    
    </summary>
    
    
      <category term="Spring之路" scheme="https://www.royians.cn/categories/Spring%E4%B9%8B%E8%B7%AF/"/>
    
    
      <category term="Spring" scheme="https://www.royians.cn/tags/Spring/"/>
    
  </entry>
  
  <entry>
    <title>记一次笔试经历</title>
    <link href="https://www.royians.cn/2019/11.06.9a314c8b/"/>
    <id>https://www.royians.cn/2019/11.06.9a314c8b/</id>
    <published>2019-11-06T01:11:24.000Z</published>
    <updated>2019-11-27T07:03:15.339Z</updated>
    
    <content type="html"><![CDATA[<div id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请再试试." data-whm="抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容."><div class="hbe-input-container"><input type="password" id="hbePass" placeholder="按照要求，设置密码为私人笔记，不准其他任何人看" autofocus="autofocus"><label>按照要求，设置密码为私人笔记，不准其他任何人看</label><div class="bottom-line"></div></div><script id="hbeData" type="hbeData" data-hmacdigest="650ca805289c699f413fb62350c17918e33064e0337b807450ea3c3129efb3c7">3d21293e93558c0d8fe5efff972a1ea82bb230988674ac958ef32d21bf7f813ab7702fccc92c4138b9887e897d75e1c04f3fd48b912fcd8bb7fdc889ece8b951a415a7318ee1dd55893756451d0f177ac290349a14e3b52c9e1ca33aeebc8ebd4b1b8a0d40dd05d447d88ce8d5fd06224edf53dd07250922a583fc65cd88549435efab21c4d2e1b02433f97413ca34853dc0eadc3be9ae333f11ac177ef192050781cafd24d277ae5c52dabd498d78d1db7f6d208e4063e8120d8fa101aca4aa98eb1795e5b1fc0c62c5b13aaff7e9fa3b7c6887d5596b8a06773e3a769a5fa98f68e58100a0599477582d6ffecdc31c749364d9f18231a7ec1a20395a9ccf75698426d3eb509379fb9e92298f3eb25151a5479fcda77b428ba2cbac8499c339b1487994cea181a25f9e99448b6d1b73cb4c858f4bcb3e4af00b5ddf0aeb82800144787bec42ef0d299f40231839158ca93a1923877d5e4896aa7d3eb41f45e3a18f19db6f5e1278f16a7d7d325654cc49759d737f964b4381faab7c811e086a24bb176fb28efaf7948b04020a40b147974a3f111d2009f8ffc86cfe4bd6fd3366279f5c215a861acb96d33f352b6e94d0679fdef3fa187a976568edf39488e22fa7c272c2dc1b9d2a347efa6a11432546f5b335250b6d73f1b94dd0899bed86ce33dfb4e5cc6193760ca65fc5dbd9c09a7d011ff1536066099179386cb092709b4fa2bd67ef5895e3a162e2fcd707cd9173c0ea61cb0b26840612137b7fdeec5fd597398bbdfdd4383cf72074ba9bcd0768ef30caee914b1adc60baceca8279f5e3c10587f44244e30cb12d8f9da1b72a69b56e476f527cbba09f25f29acddbd129abb2d83422ebcc36321b2332ebe7fc84d4bb1550866f52fbc887928d7ded5577a0e156e28467ce085f956de04aa2d58d5402371256125618962c9c9ae4e2bc4de5175beb63acc7492853c9bf76f62d53a9c94433c76b40e5286e032c2f4f48126b10c0a03edb67f4c3681180f463c144f5b66343160105c9b28dd2a51e7f2be98691b35de46ab418c4a70c2760ef15dc786650d2f42acfc061435006e612390aa4fe6969d00ba7c8c997bc5c38a641522202a2f33ef49f4dcf358ac5e58259f1189511622adebada55fc288822d49b68437dc398917aad5c362348427fc05984fed97b4a27a64ebf0ebb92035eb0963cbe6999af47e883b67443128994d70e4db6c0a02ccfa2fb1b0be9a3cd360d594e58026fd1eb7744c0b88b0ef97e4cf0d13ccd4b30c8adfa0ace7f475803e2d15bd9d8d59c6097c8066764007395e5d73061f6dc53d98c60c24d26785a00d72bd37fcc811f327b19174607bdfdf27d3b382d9e0ab953edf9a14fa9ca80f57703a96a920c90e3e0d50201a8fe63a65c718c4fe537a185c2f486cf2c21b390225e8e5fc57b68e78bd89d3cc7c460aa3a70567d4f062646c70c831182376f05af90476af996cc10237dd16303c3ee37561911f98384a13b66d4ff2b05d2d4aa1375b0f2bdddedcfa393b548b76dac10d4b0cd56aea741661f18d3c59ff5d941f3529173d5ac48be037da5df7c61e99913b8ffdb807e0eb468c803993fe57c3aeed62ee5a4bcbf3ee8d01e3e8037b274b7d321e0c0526f00ea540ed18f2b9aad7b571b792428becfcc8232bc1491ef38d2492acedb7575338c581288f43ef9914107bb43102c32c15f98495052bcd643eccf1ae4c1fd1d53d4f83283636550a8c80dcf1f7383e3d2fe14f09756120990a18645ba782c5e3339f8e307455138fb8793e79cf4dd02692b4212c6e0cc21ca2078ec7fc5cb98119cbe4eaea35ef3dea0bb3981057eace1d46131c14985c7d5bacb16554d98a4876d0a65512900cdc4c126366db4860b07a8e498f43e66db118699dd0e03bbe62c8feabb4b185b447cb5dadff61fd42253fa7eefb164cadde2211b877d0dd41f2ff5078529c3cf3826f4a0e5f3ca5a23f6a8791186b8c2bf33c210b1e11cd478b93c3c11a748da68187cec353ce4255a05cc1cfa50a7b42b8d852322857c1572d1394542d9c56628364e411aea5fe131a47b3ff7238c9a12e2cec793a9894cb35650373a6fb3bc4dcedb7ee6250428faf9c5e3c6ae8f89e92ea738852d0e10dd2f7722d4ed719a6aad3497a8677e08c7b33349f76516cf3d8fb68e048232e1846f6e60dc2c86d09a426d413dd40761ad5c4a98542f8f88a493cc19976957fd864cff3ee4a0a4270e92f6942b0f211e110ba76c79eeb96a23645c53658745d5b56b69cfdc4d6e19da82a0b23f3be3a3e90df16f64f0dd064c63690b016f1b24ec5824f1677c54364806d9701ff418308d7260a045c81a528c59181f9bcc902e60b91e3e8b4705409fb8a8ee30648216392b9c2fb798478ee30e375ba8fc95d482ab1749096e3c1a2c23ac57e7aceb71036c2392a33433879df0a084a8e71053ba1a75ece3ce76d2f88c2f7ab6c8c0617c1122ff30f3847a8706aeb0dbfa3c24922c4ef762fd83268c98b2960c40bf2fdc3da7b7fc3cc43d92cf1453eaaf6900e04cff21a705023edd939dcc9d1eccd2d3795a7083796a59afc8677f11293690ac3d478391229d74dace7572aa754bf1a3f5e6d1e8da4c17439a09dc58d013151c990a4870ab65466387c683d67c4a8330643a63298e0c582bca6594075fbb1566f9b290a18ee4cd514e25611fbd793e3eb7e8e157e114aca151fd191ae9a07cbc278577dc8d238f9250c34093061bf1d237465acd39aea40a18901726f907b6971d1bdd7a2cb9e3fdcb33643e0abd281c3239bf06c95a8d43293b2778c561f603305c9fbf6b2b74d3ff4f9010753d50c5897ffb8cfa302f4e25e8e53afc47b6c7c9e188e7258c2bc37204163d88ec9874573d49c0b40e444228acc9287d4f5f3020a442a94210ce3a175dbf9523dd8b9fd0335ecfeaca059bafa5b72607d4ad377effb5c6fe57e1f40b0d2d3f9e1931b325ecefedc7d9e805dd5e3505258544869a001bd051a9c8100b3943e44382d72e8aec61d00f7dc65c426cf28faa9e9efee8f38c039b630aef0615ace951506793550180096f4cc4916b73c2fa291fe9c507dfe07f02ad560c23b0367a98611d29770dd150ee6fc153d703730fd25f2de6328976bddceefce71280f3f814b16431f6909b5af77819452c90eba4783c210bb5c98ea39b2d09c6f0277fcddff99ff56313131f5fc4cd5b97a4d7f9c6ea338ab19a2db7d7eb49d034ae22d733a186001e602ea1efb29d4fccc6fcf5b0d487e022f508cb494c362d80fe1713e8c40f7bbccd5141b74d2d1e3847439f4675c71c7dffda74440507231b61865a4281cb0a948d68a900af874d1902fbfca10773560e5409f32c9e62945de9c584c41d3ab0f3173797a907e44eb8270e953fd4231a6a1705fd0df9648e500e52b07a6a875fedfc31e86fc0ed365d5abc18d104a0d5629a2124690c4fb5f16c542e24065ce6809ee52dec8f698bfbaffdc2c14f20b584d22650db1d895ecce12fe66e73348c03ab8f12dd2323230fbbea8811fa6f958f2bb61f530e640c05a333bfcbeabb36c1d199716015f3e3cf32b3b9421128c9a697f1a53d3c5a6a8273cbcfdf7772169fbae4bf098c16ea9ff5f56c8a7ce164bfc3a3df954e3f9edfb94c0b8bf8de290e5ed25b796e434726e873b67113999d5134b13f93cee86caaff939038a62e1e9bef0990b4b4cd296b584959d503d9ce63ede285e721a22decea3945954a9a49202b49f72deb8f8b23248cdf70fef3f88ed4869485c561654f5b8dc2753b2d24384f670a0e9d564b65cee8aa1c0fe9cf623d77a12dcf61cc20ed513f99483420dca3d68aa8dcb0147e1a64bee8f0ba4094962477631d55bbf7c5f83b773c55aedbf751a50ec114d68830d543cd8e82f59114fd02430a8d178c827f9e2123e9c32886d1e5ee3255992b3a76075ac0e5af587b1a8b878a3d650ba322c708884d6999659366dd0149c64511a264fea631d0419888150ae359525c36d95eace92677febcf9904af152c7882397be2d0e902394014543d955dbb17b436e10922e7c2eddfae54d8764946636e7b3892e4912f4a2778da06e34fd97b4de6a9205300a940dca9c219a58095494ea64cad5507c30963cdf2a9a65ad993511df853ba299d99e741060a4bddba454a8eeecf2ee5fe96bac2656339ec12ebc7916a463d787dcaf48007082bcce8eaaf8f9bc37f362bab3f1d398f823cbcbb42b6d74d5c7f7b6323e07b1fe0506064e6a623ee9b4350f546d036d44611bfabc36105e7666c960c10dd358152e9aa238f705ef9fc67002d32b152c2140da502022070568933a22cf1484c5d28fbc6c38c1ce708b08d5b22015ae3414a551f9f7775d29a94d2625b08e9fd7dabea1a08f0ca7df2e546b1fab7d902c48bd29e9ee0dfb9d50debe568791bb3610ac9e1cfdd4539b5857153e7bbf0e420cdf8b9842451cd32456cdd8098a745e5028097a32f204ee8a12ea152664a8657df299abb70a2259cda52d3224e44bba3e53345ebcab8d70b2c736f16525d26089aef1b188f7de1eb2bd77d39020b448e730d48b1918402e934ef301a45184bff09c468ebcc53a948f46afd1e85e6b1c34b31aed462e73891a90313e53e4bf89f7b0afce66e7909947bf0f256ef2b01f64cf86af691f113ca49cf8f79e12139c0818bfd43599b9c16e8f4333b0c95e3b1b5172d5fb54d5728c3dd27fe5f252533238bc15e351c6039a61560342a27378d7d0de8b73044fa2389fae8f9a4779166133f712fd2f5f107d4d6b99db3e0255a327e42bbf995386f90b339a4b893d9552bc7c944b62e83a131acdf1ea6d8155867d2d1d51201bbd332a974acf453f7832cb7b093b0bc2ae88e017d0ffe8a01142518ffb023693bb9881cba8068f28d13f71c304b4a4e039ce3d39ce20b750c5e259c2c55a66172c401152c9b71d1f750ccfe202111f3b68b8551470f560d8fb300723f2ea6868638c4a59eb4f1a7876b4c5f401119b7a9ea5c34262ec899c700862e4c9ce540fa60934b209d72c9975bb7b955889e7a9de3789fa2b360c6c55b8808f3d45bf4bcdcff0fd05ae6f87ea5890ca0d58a76c5c98b9353d79399c6b91cb532b5ba02b6b3fb654fafd606779bbc01636b0a9dc3077ddb25f004f1f55d9ac33ad5e38835f9a8958702483f5120365d2e6b4bbdd01e56e7a5b331dc1258ac68a52dd2c337722e47069e6efa01e7bff29edc32f5fe64c7f7857bb34e7347447f7731aec847b50158d5613ca64c338562a52d8e04f75a98b1783b689153a1a876a5e56c6a1c8b6dab94b1818247d6fdec99e9e9aa95f111ea0d304b06e0641ef36b076636be79adfbe617a8f2978b07bbb70e976497a57a49d4fd11cd097aec6b306268f72bf3f0b6a6e8fb9309f9424f8acb50bfddf21cc81b1d0734536d0a88b97eaee2a1afb2639c63daeffc210731cc276400c627247631b1b6793d6f167e09631c544f8f9f14754d8f0bfb0e661022799bb0e0c0a83d8b249e4d9fc6fe3d9855f287d436fd83f099d9bdd6c23ab2632b6f1b7cbdd738a9c729612d8ae466daea8a853cd77fa06a868f6169884d4930d58164e0b39c2978493945ea088482c5a7a3ed6026652c4c42b4268f19ece5ca26b4b6b777422f4c606c13988f73a9f8f873d5400c5c7d9c8717a672b55765e0da0f82ce9cd999f837d0af7c800c640908f4eae4b3e24d318fdd1d7948cd16e60ca1ab8e4929fd61bada9847dcaaaa5a50a142da9a698bdf6576d49deb68a05f346acaac4f28b4083a351430d26d1144a316375976a40727729e1bdfe19c0d83d997f2ed5ae621c5ec5f92873d3d14802a1f906c1703089738a7d94c23f5679916394ccc17f9424a78478a64892db38f7c74938535feabbe931282e6d5f0b4ee3c9d6f247d132a93076718c60428512a0cfd5bd7bc891131f8ee8bfee6b491f0c259669c8d18a35fcbab63f6a88a41551d649d30f5dd23be6a06bb05114311cd8bee8da299233e032c4f19e879080056ee542d68b7d064bae5f69fb8c56810944df5e190bc2848fcd5873f802e5c0df031f5718909d340330a05453f06ba5321fcef26972d0d8843cd98fe3eed87ecbc1b34f01979a6271e16bc380be56c42e0c860f741f03f3b6deb0b01ed5d177a7b747e33030cf4b384428b85112d26aa3517a5e6ca41e9c08e8ff2bfd7e73edc3065bd8389871171fbd71e92260f983eb325920a37b8d952929acc70d5f411058f072d31e25008840eb16bbb14990f8f9c345006f8302bf882e1791f996aad1055eb9aad63124071fd728d847678b68340156b149ef69d8f70c7bf7dcbcdaabf02cb6a628199c86d2b61266328fa297156c476e00ff8ffd55b8f12c1292122900b9215d67ee3dcefe6905dd601bda80d60fe8b17e2fbfc0095ecab7100937f90b7862fb19544f1794b577d63f08e8ae31f46362cd27a7a424b7868874258fd308b33ef109107d540f8ba7ecbc96d38730a5c870a83f3c6a3dad9af87e066b5ffbfd6843d64a9b640a06487b7537500b5a3319b38d45a13006bcc6715ddcce052393716b4e1fff1a1080dcf2eb4c8d3e6b8d4b421d9b0ca755b43dd7bff1ac40df61f6f75e3c72f7a666f86be1ddeda31f7ef6b909400f8aaf5d56fb3abc9662af9587a985df737493e80b1dd46abfc09ee6d59f25a7662f0d204f5260591a794be8fcf299da6dd4d22930f1cf4146d5533655eb6edb8f547b9f82a50ea351f7cd858dbc01cdcf97a6a97682d4c553e41509c1bd17efa6e0c4caef06e90b7c50604180d497d8605a34b78d41e36b75fa30f64b9f634869c63a3c20f188e0b612c04ea44d2218ef25ac40c5bc8d5dfd520a1e30b89e069fe508028388861599abf50f6d4df0272c110a55b8b9553bb4e67ebeb5223cb2e2f1091fb37efc9431deec6bbd61c4d318e5a467cb424e1187b6fd906798379c83835fb0e6c68159629f210c02bca067f34de0318d139e122eb2e569beb7bc577549408d59cb0eafe9c04fb5961a82e41b411125e6b7ae3248d17a630c923c16b25ae8be486e1ebb147f776230e3b99c93e509ad04e561385ce523cb8a84368cc4af10a88c029dbb74cff1fac940b7d0d24077b0c9f335e02dfba0fb9ef5b8a14ac1bf094b9bf4fff9fb84f6d5f15503723bb2d969ef942bb259cde5ce4206990a703fc8dc368cf65ee92bcc2bd6f9aec39d0bfd0c84a8163e847f56ec88e362212bf0ec3c7d84f49b875461127d746b0fe30847fd373b9497680a145b86cbbb77e3cae28b49e02c8e9653f23e955242bf247d753073ed9fa80bdb5bb942a9926f145518390c098546d6a7da51dc54a2b61d75a611088ec700034746c14bdd55c7c3859e24c94b610723f8bcf7fce9eeb731718889fff78c378458dab2bb1a2f660b85e451233496d66fe529c430eb6379f57f4a26514cde64b798896e00ef7c9cbd2e34d0436da1491554be6c17bbf354f5cf8049cbddd48104b59a487e50ff2f2f7f055a9829eae9c185ce8664a37f77cab385cb3f7d9b66e42d292b9e3d5d7205f6bd96a72283df18aa661e271fff1db52be62aaf133d749e8dec0afe8bd724096d58cb3a37bc678c70e567bf3c021cc13b417a5c047b6bfdd86569a99e6453952ae001dbbf905383ebb9eaa8bb82a6d062a8da1b7caa29eb5f1198c2eacdb70d432c859670664e9308d0d87e466a0f1d7285c6d7c3759a9ebf610fced555479891f18c7aa8b873a2922bb03f5f9c1d8a6768ec41d3d636a231705090830b9cb05c7263c959f64c29fab44c9ea7ec2870fcb57f752ac583ffcd6913cc7f695bb907b1d0ee70e03a41c7774d69e017156301d34f7c7de35ea6e19121cdf345a4ef53c50d0719b8afbbf72161404bfce61d1cc5a646ce28ebdd397aeb0c30ee69daaa374770ec164f608a92d65e8ef5b0f46d1e210ce288f10e7b79e96008ed9c2458ebbed0c4735f5dc2e21d88acec0d9134ef455cbf315a027682f51ce5d6544d561b15e8f03ccf4865746dd515a8d6d1cd8d2014af4d5f4ff5c7785db25e927d55f49fb1a3bf3e3e2c0ad285</script></div><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
    
    <summary type="html">
    
      昨天参加了米哈游的笔试，今天总结一下吧。
    
    </summary>
    
    
      <category term="经验" scheme="https://www.royians.cn/categories/%E7%BB%8F%E9%AA%8C/"/>
    
    
      <category term="笔试" scheme="https://www.royians.cn/tags/%E7%AC%94%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>Java 如何跳出forEach</title>
    <link href="https://www.royians.cn/2019/11.04.4364ab65/"/>
    <id>https://www.royians.cn/2019/11.04.4364ab65/</id>
    <published>2019-11-04T03:26:27.000Z</published>
    <updated>2019-11-27T07:03:15.431Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Dec 13 2019 16:47:29 GMT+0800 (GMT+08:00) --><p>StackOverflow上看到一个<a href="https://stackoverflow.com/questions/23996454/terminate-or-break-java-8-stream-loop" target="_blank" rel="noopener">以前没有意识到的问题</a>，怎样能跳出forEach循环呢？</p><a id="more"></a><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>我的第一想法是，<code>break</code>不可以使用吗？<code>continue</code>呢？</p><h2 id="探索"><a href="#探索" class="headerlink" title="探索"></a>探索</h2><p>于是我在IDEA中试了一下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">testBreak</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        LinkedList&lt;Integer&gt; integers = <span class="keyword">new</span> LinkedList&lt;Integer&gt;(Collections.singleton(<span class="number">10</span>));</span><br><span class="line">        Random random = <span class="keyword">new</span> Random();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            integers.add(random.nextInt(<span class="number">20</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        integers.forEach((number) -&gt; &#123;</span><br><span class="line">            System.out.println(<span class="string">"Number: "</span> + number);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>结果编译时报错：</p><p><img alt="E" data-src="https://i.loli.net/2019/11/04/ZVgGnEmXUl58D7z.png"></p><p>接着我试了<code>continue</code>，同样报错。</p><p>那怎么办了？</p><p>我接着试了<code>return</code>：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">testBreak</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;Integer&gt; integers = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br><span class="line">        integers.forEach((number) -&gt; &#123;</span><br><span class="line">            System.out.println(<span class="string">"Number: "</span> + number);</span><br><span class="line">            <span class="keyword">if</span> (number == <span class="number">2</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>运行结果：</p><p><img alt="E" data-src="https://i.loli.net/2019/11/04/iw4xjcDmr1Ls8yk.png"></p><p>没卵用</p><p>然后我发现粗心的把输出语句写在return上面了</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">testBreak</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;Integer&gt; integers = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br><span class="line">        integers.forEach(number -&gt; &#123;</span><br><span class="line">            <span class="keyword">if</span> (number == <span class="number">2</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">"Number: "</span> + number);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>结果如下：</p><p><img alt="E" data-src="https://i.loli.net/2019/11/04/CVgiGSeprkZWO92.png"></p><p>相当于continue</p><p>continue替代者找到了，那如何实现break呢？</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BreakException</span> <span class="keyword">extends</span> <span class="title">RuntimeException</span></span>&#123; &#125;</span><br><span class="line">...</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">testBreak</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;Integer&gt; integers = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            integers.forEach(number -&gt; &#123;</span><br><span class="line">                <span class="keyword">if</span> (number == <span class="number">2</span>) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> BreakException();</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println(<span class="string">"Number: "</span> + number);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (BreakException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">"Break"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>结果：<br><img alt="image.png" data-src="https://i.loli.net/2019/11/04/su4erb2AxR9ShGg.png"></p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>forEach()方法不支持break、continue，是因为源码中：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">forEach</span><span class="params">(Consumer&lt;? <span class="keyword">super</span> T&gt; action)</span> </span>&#123;</span><br><span class="line">        Objects.requireNonNull(action);</span><br><span class="line">        <span class="keyword">for</span> (T t : <span class="keyword">this</span>) &#123;</span><br><span class="line">            action.accept(t);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>for循环是在方法体内的，如果在forEach的lambda表达式中使用break和continue，是没有效果的。我们找到的替代方法是使用return;达到continue的效果，使用throw异常的方式取得和break一样的效果。</p><p>但是感觉有点麻烦了，不如还是直接使用增强for循环遍历。</p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Dec 13 2019 16:47:29 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;StackOverflow上看到一个&lt;a href=&quot;https://stackoverflow.com/questions/23996454/terminate-or-break-java-8-stream-loop&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;以前没有意识到的问题&lt;/a&gt;，怎样能跳出forEach循环呢？&lt;/p&gt;
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>A岛 API</title>
    <link href="https://www.royians.cn/2019/11.04.4488dc7c/"/>
    <id>https://www.royians.cn/2019/11.04.4488dc7c/</id>
    <published>2019-11-04T01:46:36.000Z</published>
    <updated>2019-11-27T07:03:15.313Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Dec 13 2019 16:47:29 GMT+0800 (GMT+08:00) --><p>昨天学会了使用Java发送HTTP GET请求，今天先来了解一下API吧</p><h2 id="获取板块列表"><a href="#获取板块列表" class="headerlink" title="获取板块列表"></a>获取板块列表</h2><p><strong>GET</strong> <code>https://adnmb2.com/Api/getForumList?appid=nimingban</code></p><p><strong>Result：</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">"id"</span>: <span class="string">"4"</span>,</span><br><span class="line">        <span class="attr">"sort"</span>: <span class="string">"1"</span>,</span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"综合"</span>,</span><br><span class="line">        <span class="attr">"status"</span>: <span class="string">"n"</span>,</span><br><span class="line">        <span class="attr">"forums"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"id"</span>: <span class="string">"-1"</span>,</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"时间线"</span>,</span><br><span class="line">                <span class="attr">"msg"</span>: <span class="string">"这里是匿名版最新的串"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"id"</span>: <span class="string">"4"</span>,</span><br><span class="line">                <span class="attr">"fgroup"</span>: <span class="string">"4"</span>,</span><br><span class="line">                <span class="attr">"sort"</span>: <span class="string">"2"</span>,</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"综合版1"</span>,</span><br><span class="line">                <span class="attr">"showName"</span>: <span class="string">""</span>,</span><br><span class="line">                <span class="attr">"msg"</span>: <span class="string">"欢迎光临，这里是A岛。上手前请阅读&lt;strong&gt;&lt;a href=\"/Forum\"&gt;全岛总版规"</span>,</span><br><span class="line">                <span class="attr">"interval"</span>: <span class="string">"60"</span>,</span><br><span class="line">                <span class="attr">"createdAt"</span>: <span class="string">"2011-10-21 15:49:28"</span>,</span><br><span class="line">                <span class="attr">"updateAt"</span>: <span class="string">"2015-06-23 17:26:28"</span>,</span><br><span class="line">                <span class="attr">"status"</span>: <span class="string">"n"</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p><strong>解析：</strong></p><ul><li>大模块（多个）<ul><li>id ID</li><li>sort 排序</li><li>name 大模块名称</li><li>status 状态 n 正常</li><li>forums 板块（多个）<ul><li>id ID</li><li>fgroup</li><li>sort 排序</li><li>name 板块名</li><li>showName</li><li>msg 板块信息</li><li>interVal 发帖时间限制 毫秒</li><li>createdAt</li><li>updatedAt</li><li>status 状态 n 正常</li></ul></li></ul></li></ul><h2 id="获取常用串"><a href="#获取常用串" class="headerlink" title="获取常用串"></a>获取常用串</h2><p><strong>GET</strong> <code>http://nimingban.herokuapp.com/common_posts</code></p><p><strong>Result:</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"点兔好棒"</span>,</span><br><span class="line">        <span class="attr">"id"</span>: <span class="string">"3337201"</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p><strong>解析：</strong></p><ul><li>（多个）<ul><li>name 名字</li><li>id 串号</li></ul></li></ul><h2 id="获取某板块中的串"><a href="#获取某板块中的串" class="headerlink" title="获取某板块中的串"></a>获取某板块中的串</h2><p><strong>GET</strong> <code>https://adnmb2.com/Api/showf?appid=nimingban&amp;id=2&amp;page=1</code></p><ul><li>id 板块id</li><li>page 页码</li></ul><p><strong>Result：</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">"id"</span>: <span class="string">"21141616"</span>,</span><br><span class="line">        <span class="attr">"img"</span>: <span class="string">"2019-11-04/5dbf84c4abbde"</span>,</span><br><span class="line">        <span class="attr">"ext"</span>: <span class="string">".jpg"</span>,</span><br><span class="line">        <span class="attr">"now"</span>: <span class="string">"2019-11-04(一)09:54:12"</span>,</span><br><span class="line">        <span class="attr">"userid"</span>: <span class="string">"hwxl6hJ"</span>,</span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"无名氏"</span>,</span><br><span class="line">        <span class="attr">"email"</span>: <span class="string">""</span>,</span><br><span class="line">        <span class="attr">"title"</span>: <span class="string">"无标题"</span>,</span><br><span class="line">        <span class="attr">"content"</span>: <span class="string">"什么叫人文关怀啊（后跳）"</span>,</span><br><span class="line">        <span class="attr">"sage"</span>: <span class="string">"0"</span>,</span><br><span class="line">        <span class="attr">"admin"</span>: <span class="string">"0"</span>,</span><br><span class="line">        <span class="attr">"status"</span>: <span class="string">"n"</span>,</span><br><span class="line">        <span class="attr">"replys"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"id"</span>: <span class="string">"21141766"</span>,</span><br><span class="line">                <span class="attr">"img"</span>: <span class="string">""</span>,</span><br><span class="line">                <span class="attr">"ext"</span>: <span class="string">""</span>,</span><br><span class="line">                <span class="attr">"now"</span>: <span class="string">"2019-11-04(一)10:02:17"</span>,</span><br><span class="line">                <span class="attr">"userid"</span>: <span class="string">"QomeeBp"</span>,</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"无名氏"</span>,</span><br><span class="line">                <span class="attr">"email"</span>: <span class="string">""</span>,</span><br><span class="line">                <span class="attr">"title"</span>: <span class="string">"无标题"</span>,</span><br><span class="line">                <span class="attr">"content"</span>: <span class="string">"相声要是不好笑，那就太好笑了"</span>,</span><br><span class="line">                <span class="attr">"sage"</span>: <span class="string">"0"</span>,</span><br><span class="line">                <span class="attr">"admin"</span>: <span class="string">"0"</span>,</span><br><span class="line">                <span class="attr">"status"</span>: <span class="string">"n"</span></span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">"replyCount"</span>: <span class="string">"3"</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p><strong>解析：</strong></p><ul><li>串（多个）<ul><li>id ID</li><li>img 图片链接</li><li>ext 图片后缀名</li><li>now 发表时间</li><li>userid 饼干</li><li>name 用户填写的name</li><li>email 用户填写的email</li><li>title 用户填写的标题</li><li>content 串的文本内容</li><li>sage 是否SAGE 0 1</li><li>admin</li><li>status 状态</li><li>replys 回复<ul><li>回复串（多个）<ul><li>id ID</li><li>img 图片链接</li><li>ext 图片后缀名</li><li>now 发表时间</li><li>userid 饼干</li><li>name 用户填写的name</li><li>email 用户填写的email</li><li>title 用户填写的标题</li><li>content 串的文本内容</li><li>sage 是否SAGE 0 1</li><li>admin</li><li>status 状态</li></ul></li></ul></li><li>replyCount 回复数</li></ul></li></ul><h2 id="获取-Timeline"><a href="#获取-Timeline" class="headerlink" title="获取 Timeline"></a>获取 Timeline</h2><p><strong>GET</strong> <code>https://adnmb2.com/Api/timeline?appid=nimingban&amp;page=1</code></p><ul><li>page 页码</li></ul><p><strong>Result：</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">"id"</span>: <span class="string">"14500641"</span>,</span><br><span class="line">        <span class="attr">"fid"</span>: <span class="string">"4"</span>,</span><br><span class="line">        <span class="attr">"img"</span>: <span class="string">"2019-08-24/5d60c60501fd3"</span>,</span><br><span class="line">        <span class="attr">"ext"</span>: <span class="string">".jpg"</span>,</span><br><span class="line">        <span class="attr">"now"</span>: <span class="string">"2018-07-06(五)11:41:51"</span>,</span><br><span class="line">        <span class="attr">"userid"</span>: <span class="string">"ATM"</span>,</span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"无名氏"</span>,</span><br><span class="line">        <span class="attr">"email"</span>: <span class="string">""</span>,</span><br><span class="line">        <span class="attr">"title"</span>: <span class="string">"无标题"</span>,</span><br><span class="line">        <span class="attr">"content"</span>: <span class="string">"&lt;font color=\"red\"&gt;本站&lt;b&gt;禁止一切涉政涉黄及其擦边暗示！！！&lt;/b&gt;&lt;/font&gt;违规将导致删串封禁&lt;br&gt;\r\n综合一禁发一切&lt;font color=\"orange\"&gt;时事/热点/民生等社会性话题&lt;/font&gt;，相关请发往&lt;a href=\"/t/18830332 \"&gt;速报2版&lt;/a&gt;&lt;br&gt;\r\n&lt;font color=\"green\"&gt;======================&lt;br&gt; &lt;/font&gt;\r\n欢迎来到A岛，一个&lt;a href=\"/t/6064422\"&gt;开放包容，理性客观，有事说事，就事论事&lt;/a&gt;的讨论社区！发串前请仔细阅读&lt;a href=\"http://adnmb.com/\"&gt;→总版规←&lt;/a&gt;&lt;br&gt;，如仍有本站使用问题请前往&lt;a href=\"/t/17703121\"&gt;问答集中串&lt;/a&gt;\r\n永久域名&lt;a href=\"https://adnmb.com\"&gt;https://adnmb.com&lt;/a&gt;，请将此地址加入收藏夹。"</span>,</span><br><span class="line">        <span class="attr">"sage"</span>: <span class="string">"1"</span>,</span><br><span class="line">        <span class="attr">"admin"</span>: <span class="string">"1"</span>,</span><br><span class="line">        <span class="attr">"replys"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"id"</span>: <span class="string">"21142049"</span>,</span><br><span class="line">                <span class="attr">"img"</span>: <span class="string">""</span>,</span><br><span class="line">                <span class="attr">"ext"</span>: <span class="string">""</span>,</span><br><span class="line">                <span class="attr">"now"</span>: <span class="string">"2019-11-04(一)10:16:04"</span>,</span><br><span class="line">                <span class="attr">"userid"</span>: <span class="string">"fxdF1pJ"</span>,</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"无名氏"</span>,</span><br><span class="line">                <span class="attr">"email"</span>: <span class="string">""</span>,</span><br><span class="line">                <span class="attr">"title"</span>: <span class="string">"无标题"</span>,</span><br><span class="line">                <span class="attr">"content"</span>: <span class="string">"&lt;font color=\"#789922\"&gt;&amp;gt;&amp;gt;No.21142030&lt;/font&gt;&lt;br /&gt;\n(`ヮ´ )爆炸"</span>,</span><br><span class="line">                <span class="attr">"sage"</span>: <span class="string">"0"</span>,</span><br><span class="line">                <span class="attr">"admin"</span>: <span class="string">"0"</span>,</span><br><span class="line">                <span class="attr">"status"</span>: <span class="string">"n"</span></span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">"replyCount"</span>: <span class="string">"0"</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p><strong>解析：</strong></p><ul><li>时间线串（多个）<ul><li>id ID</li><li>fid 板块ID</li><li>img 图片链接</li><li>ext 图片后缀名</li><li>now 发表时间</li><li>userid 饼干</li><li>name 用户填写的name</li><li>email 用户填写的email</li><li>title 用户填写的标题</li><li>content 串的文本内容</li><li>sage 是否SAGE 0 1</li><li>admin</li><li>replys 回复<ul><li>回复串（多个）</li></ul></li><li>replyCount 回复数</li></ul></li></ul><h2 id="获取某串内容"><a href="#获取某串内容" class="headerlink" title="获取某串内容"></a>获取某串内容</h2><p><strong>GET</strong> <code>https://adnmb2.com/Api/thread?appid=nimingban&amp;id=20881021&amp;page=1</code></p><p><strong>Result：</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"id"</span>: <span class="string">"20881021"</span>,</span><br><span class="line">    <span class="attr">"fid"</span>: <span class="string">"111"</span>,</span><br><span class="line">    <span class="attr">"img"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="attr">"ext"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="attr">"now"</span>: <span class="string">"2019-10-25(五)13:30:17"</span>,</span><br><span class="line">    <span class="attr">"userid"</span>: <span class="string">"fxdF1pJ"</span>,</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"无名氏"</span>,</span><br><span class="line">    <span class="attr">"email"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="attr">"title"</span>: <span class="string">"无标题"</span>,</span><br><span class="line">    <span class="attr">"content"</span>: <span class="string">"大概是炼丹团&lt;br /&gt;\n&lt;br /&gt;\n目标是成为最强丹师！炼制出传说中的神级丹药！"</span>,</span><br><span class="line">    <span class="attr">"sage"</span>: <span class="string">"0"</span>,</span><br><span class="line">    <span class="attr">"admin"</span>: <span class="string">"0"</span>,</span><br><span class="line">    <span class="attr">"replys"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"id"</span>: <span class="string">"20881030"</span>,</span><br><span class="line">            <span class="attr">"img"</span>: <span class="string">""</span>,</span><br><span class="line">            <span class="attr">"ext"</span>: <span class="string">""</span>,</span><br><span class="line">            <span class="attr">"now"</span>: <span class="string">"2019-10-25(五)13:30:31"</span>,</span><br><span class="line">            <span class="attr">"userid"</span>: <span class="string">"MFrfo8m"</span>,</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"无名氏"</span>,</span><br><span class="line">            <span class="attr">"email"</span>: <span class="string">""</span>,</span><br><span class="line">            <span class="attr">"title"</span>: <span class="string">"无标题"</span>,</span><br><span class="line">            <span class="attr">"content"</span>: <span class="string">"r"</span>,</span><br><span class="line">            <span class="attr">"sage"</span>: <span class="string">"0"</span>,</span><br><span class="line">            <span class="attr">"admin"</span>: <span class="string">"0"</span>,</span><br><span class="line">            <span class="attr">"status"</span>: <span class="string">"n"</span></span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"replyCount"</span>: <span class="string">"910"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>解析：</strong></p><ul><li>串<ul><li>id ID</li><li>img 图片链接</li><li>ext 图片后缀名</li><li>now 发表时间</li><li>userid 饼干</li><li>name 用户填写的name</li><li>email 用户填写的email</li><li>title 用户填写的标题</li><li>content 串的文本内容</li><li>sage 是否SAGE 0 1</li><li>admin</li><li>replys 回复<ul><li>回复串（多个）</li></ul></li><li>replyCount 回复数</li></ul></li></ul><h2 id="获取管理串的页面"><a href="#获取管理串的页面" class="headerlink" title="获取管理串的页面"></a>获取管理串的页面</h2><p><strong>GET</strong> <code>https://adnmb2.com/Home/Forum/ref?appid=nimingban&amp;id=19971128</code></p><ul><li>id 串号</li></ul><p>只有红名能使用</p><h2 id="获取订阅"><a href="#获取订阅" class="headerlink" title="获取订阅"></a>获取订阅</h2><p><strong>GET</strong> <code>https://adnmb2.com/Api/feed?appid=nimingban&amp;uuid=5&amp;page=1</code></p><ul><li>uuid 用户ID</li><li>page 页码</li></ul><p>同样没法用，不知道uuid如何获取</p><h2 id="添加订阅"><a href="#添加订阅" class="headerlink" title="添加订阅"></a>添加订阅</h2><p><strong>POST</strong> <code>https://adnmb2.com/Api/addFeed?appid=nimingban&amp;uuid=1&amp;tid=11550598</code></p><ul><li>uuid 用户ID</li><li>tid 串ID</li></ul><p>仿佛任何人都能操作</p><h2 id="删除订阅"><a href="#删除订阅" class="headerlink" title="删除订阅"></a>删除订阅</h2><p><strong>POST</strong> <code>https://adnmb2.com/Api/delFeed?appid=nimingban&amp;uuid=1&amp;tid=11550598</code></p><ul><li>uuid 用户ID</li><li>tid 串ID</li></ul><p>仿佛任何人都能操作</p><h2 id="搜索"><a href="#搜索" class="headerlink" title="搜索"></a>搜索</h2><p><strong>GET</strong> <code>https://adnmb2.com/Api/search?appid=nimingban&amp;q=hello&amp;pageNo=1</code></p><ul><li>q 搜索词</li><li>pageNo 页数</li></ul><p>需要Cookies</p><p>今天就探索到这里，至于发帖、回复日后更新到这里。</p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      昨天简单使用了Java HttpClient获取HTTP连接，今天总结一下A岛有哪些API
    
    </summary>
    
    
    
      <category term="总结" scheme="https://www.royians.cn/tags/%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>Java 与 HTTP GET</title>
    <link href="https://www.royians.cn/2019/11.03.b625e692/"/>
    <id>https://www.royians.cn/2019/11.03.b625e692/</id>
    <published>2019-11-03T10:55:13.000Z</published>
    <updated>2019-12-05T07:04:19.206Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Dec 13 2019 16:47:29 GMT+0800 (GMT+08:00) --><p>最近在<a href="https://adnmb2.com/t/21065596" target="_blank" rel="noopener">No.21065596↘</a>看到别人用python做了一个简单的机器人，下载了源码以后，打算用A岛API也做一个在A岛自动回复的机器人，今天先试着用Java从A岛爬一些串下来。</p><a id="more"></a><h2 id="Java调用HTTP接口进行GET的几种方法"><a href="#Java调用HTTP接口进行GET的几种方法" class="headerlink" title="Java调用HTTP接口进行GET的几种方法"></a>Java调用HTTP接口进行GET的几种方法</h2><h3 id="通过java-net-HttpURLConnection"><a href="#通过java-net-HttpURLConnection" class="headerlink" title="通过java.net.HttpURLConnection"></a>通过<code>java.net.HttpURLConnection</code></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">httpGetViaHttpUrlConnection</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> String URI = <span class="string">"https://www.royians.cn"</span>;</span><br><span class="line">        HttpsURLConnection connection = <span class="keyword">null</span>;</span><br><span class="line">        BufferedReader br = <span class="keyword">null</span>;</span><br><span class="line">        InputStreamReader isr = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            URL url = <span class="keyword">new</span> URL(URI + <span class="string">"/tags"</span>);</span><br><span class="line">            connection = (HttpsURLConnection) url.openConnection();</span><br><span class="line">            connection.setRequestMethod(<span class="string">"GET"</span>);</span><br><span class="line">            connection.setRequestProperty(<span class="string">"Content-Type"</span>, <span class="string">"text/html; charset=UTF-8"</span>);</span><br><span class="line">            isr = <span class="keyword">new</span> InputStreamReader(connection.getInputStream(), StandardCharsets.UTF_8);</span><br><span class="line">            br = <span class="keyword">new</span> BufferedReader(isr);</span><br><span class="line">            String line = <span class="string">""</span>;</span><br><span class="line">            StringBuilder result = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">            <span class="keyword">while</span> ((line = br.readLine()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                result.append(line).append(<span class="string">"\n"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            connection.disconnect();</span><br><span class="line"></span><br><span class="line">            System.out.println(result.toString());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (connection != <span class="keyword">null</span>) &#123;</span><br><span class="line">                connection.disconnect();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (isr != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    isr.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (br != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    br.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="通过-URLConnection"><a href="#通过-URLConnection" class="headerlink" title="通过 URLConnection"></a>通过 <code>URLConnection</code></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">httpGetViaUrlConnection</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> String URI = <span class="string">"https://www.royians.cn"</span>;</span><br><span class="line">        URLConnection connection = <span class="keyword">null</span>;</span><br><span class="line">        BufferedReader br = <span class="keyword">null</span>;</span><br><span class="line">        InputStreamReader isr = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            URL url = <span class="keyword">new</span> URL(URI + <span class="string">"/tags"</span>);</span><br><span class="line">            connection = url.openConnection();</span><br><span class="line">            connection.setRequestProperty(<span class="string">"Content-Type"</span>, <span class="string">"text/html; charset=UTF-8"</span>);</span><br><span class="line">            isr = <span class="keyword">new</span> InputStreamReader(connection.getInputStream(), StandardCharsets.UTF_8);</span><br><span class="line">            br = <span class="keyword">new</span> BufferedReader(isr);</span><br><span class="line">            String line = <span class="string">""</span>;</span><br><span class="line">            StringBuilder result = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">            <span class="keyword">while</span> ((line = br.readLine()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                result.append(line).append(<span class="string">"\n"</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            System.out.println(result.toString());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (isr != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    isr.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (br != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    br.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="HttpUrlConnection-和-URLConnection-的区别"><a href="#HttpUrlConnection-和-URLConnection-的区别" class="headerlink" title="HttpUrlConnection 和 URLConnection 的区别"></a>HttpUrlConnection 和 URLConnection 的区别</h4><p>URLConnection是Java与所有URL进行连接的所有类的父类，HttpUrlConnection是其子类，这两个类都是抽象的，我们需要使用URL对象的openConnection来获取实例。想要关闭HttpURLConnection，只需要调用disconnect()方法，关闭URLConnection资源，需要在InputStream或OutputStream上调用close()方法，这样做可以释放与URLConnection实例相关的网络资源。</p><h3 id="通过Apache的HttpClient"><a href="#通过Apache的HttpClient" class="headerlink" title="通过Apache的HttpClient"></a>通过Apache的HttpClient</h3><blockquote><p>首先需要导入包，找了半天，应该是httpclient这个jar包，后来发现还需要httpcore这个包。</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">httpGetViaHttpClient</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> String URI = <span class="string">"https://www.royians.cn"</span>;</span><br><span class="line"></span><br><span class="line">        CloseableHttpClient client = <span class="keyword">null</span>;</span><br><span class="line">        CloseableHttpResponse response = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            HttpGet get = <span class="keyword">new</span> HttpGet(URI + <span class="string">"/tags/"</span>);</span><br><span class="line">            client = HttpClients.createDefault();</span><br><span class="line">            response = client.execute(get);</span><br><span class="line">            HttpEntity entity = response.getEntity();</span><br><span class="line">            String result  = EntityUtils.toString(entity);</span><br><span class="line">            System.out.println(result);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (response != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    response.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (client != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    client.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>然后运行上面测试，结果报错：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory</span><br><span class="line"></span><br><span class="line">at org.apache.http.conn.ssl.DefaultHostnameVerifier.&lt;init&gt;(DefaultHostnameVerifier.java:82)</span><br><span class="line">at org.apache.http.impl.client.HttpClientBuilder.build(HttpClientBuilder.java:966)</span><br><span class="line">at org.apache.http.impl.client.HttpClients.createDefault(HttpClients.java:56)</span><br><span class="line">at com.royians.test.TestHttpConnection.httpGetViaHttpClient(TestHttpConnection.java:111)</span><br><span class="line">at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class="line">at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)</span><br><span class="line">at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)</span><br><span class="line">at java.lang.reflect.Method.invoke(Method.java:498)</span><br><span class="line">at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:628)</span><br><span class="line">at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:117)</span><br><span class="line">at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:184)</span><br><span class="line">at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)</span><br><span class="line">at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:180)</span><br><span class="line">at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:127)</span><br><span class="line">at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)</span><br><span class="line">at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:135)</span><br><span class="line">at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)</span><br><span class="line">at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)</span><br><span class="line">at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)</span><br><span class="line">at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)</span><br><span class="line">at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)</span><br><span class="line">at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)</span><br><span class="line">at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)</span><br><span class="line">at java.util.ArrayList.forEach(ArrayList.java:1257)</span><br><span class="line">at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)</span><br><span class="line">at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)</span><br><span class="line">at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)</span><br><span class="line">at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)</span><br><span class="line">at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)</span><br><span class="line">at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)</span><br><span class="line">at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)</span><br><span class="line">at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)</span><br><span class="line">at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)</span><br><span class="line">at java.util.ArrayList.forEach(ArrayList.java:1257)</span><br><span class="line">at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)</span><br><span class="line">at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)</span><br><span class="line">at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)</span><br><span class="line">at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)</span><br><span class="line">at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)</span><br><span class="line">at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)</span><br><span class="line">at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)</span><br><span class="line">at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)</span><br><span class="line">at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)</span><br><span class="line">at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)</span><br><span class="line">at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)</span><br><span class="line">at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)</span><br><span class="line">at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:229)</span><br><span class="line">at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:197)</span><br><span class="line">at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:211)</span><br><span class="line">at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:191)</span><br><span class="line">at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)</span><br><span class="line">at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:69)</span><br><span class="line">at com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)</span><br><span class="line">at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)</span><br><span class="line">at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)</span><br><span class="line">Caused by: java.lang.ClassNotFoundException: org.apache.commons.logging.LogFactory</span><br><span class="line">at java.net.URLClassLoader.findClass(URLClassLoader.java:382)</span><br><span class="line">at java.lang.ClassLoader.loadClass(ClassLoader.java:424)</span><br><span class="line">at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:349)</span><br><span class="line">at java.lang.ClassLoader.loadClass(ClassLoader.java:357)</span><br><span class="line">... 55 more</span><br></pre></td></tr></table></figure><p>原因是还需要导入Apache的<code>common-logging</code>包，导入后正常运行。</p><h2 id="获取A岛某串内容"><a href="#获取A岛某串内容" class="headerlink" title="获取A岛某串内容"></a>获取A岛某串内容</h2><p>常用的基本上就是上面几种方法，现在我用最基本的HttpURLConnection获取A岛的综合一的串的内容。</p><p>API参考的是开源紫岛APP的代码<a href="https://github.com/seven332/Nimingban/blob/master/app/src/main/java/com/hippo/nimingban/client/ac/ACUrl.java" target="_blank" rel="noopener">⋙</a></p><p>A岛API没人总结，可能我得自己摸索一下，首先看到了如何获取一个串里的内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET https://adnmb2.com/Api/thread?appid=nimingban&amp;id=5000&amp;page=1</span><br></pre></td></tr></table></figure><p>参数中，appid是固定的，id就是串号，page是页码。返回的是JSON格式。</p><p>现在我们写Code来获取这个API的内容，串就用光来po的串吧<a href="https://adnmb2.com/t/16236809" target="_blank" rel="noopener">No.16236809↘</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">getGuangLaiPoThread</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String postUrl = AcUrl.getPostUrl(<span class="string">"16236809"</span>, <span class="number">1</span>);</span><br><span class="line">        InputStreamReader isr = <span class="keyword">null</span>;</span><br><span class="line">        HttpsURLConnection connection = <span class="keyword">null</span>;</span><br><span class="line">        BufferedReader br = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            URL url = <span class="keyword">new</span> URL(<span class="string">"https://"</span>+postUrl);</span><br><span class="line">            connection = (HttpsURLConnection) url.openConnection();</span><br><span class="line">            connection.setRequestMethod(<span class="string">"GET"</span>);</span><br><span class="line">            connection.setRequestProperty(<span class="string">"Content-Type"</span>, <span class="string">"application/json; charset=utf-8"</span>);</span><br><span class="line">            isr = <span class="keyword">new</span> InputStreamReader(connection.getInputStream(), StandardCharsets.UTF_8);</span><br><span class="line">            br = <span class="keyword">new</span> BufferedReader(isr);</span><br><span class="line">            String line = <span class="string">""</span>;</span><br><span class="line">            StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">            <span class="keyword">while</span>((line = br.readLine())!=<span class="keyword">null</span>) &#123;</span><br><span class="line">                sb.append(line).append(<span class="string">"\n"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            String json = sb.toString();</span><br><span class="line">            System.out.println(json);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (connection != <span class="keyword">null</span>) &#123;</span><br><span class="line">                connection.disconnect();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (isr != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    isr.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>看代码没有什么错，但是运行后发现是乱码：</p><p><img alt="乱码" data-src="https://i.loli.net/2019/11/03/M5XOsKtfzogy3H6.png"></p><p>查看cosole：</p><p><img alt="console" data-src="https://i.loli.net/2019/11/03/Aw7MbDvSCPdch4R.png"></p><p>发现 Content-Encoding: gzip</p><p>经过查看<a href="https://blog.csdn.net/yiifaa/article/details/80928522" target="_blank" rel="noopener">这篇博文</a>提供的解决方法，最后写成：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">getGuangLaiPoThread</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String postUrl = AcUrl.getPostUrl(<span class="string">"16236809"</span>, <span class="number">1</span>);</span><br><span class="line">        CloseableHttpClient httpclient = HttpClients.custom().addInterceptorFirst(<span class="keyword">new</span> HttpResponseInterceptor() &#123;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">process</span><span class="params">(HttpResponse response, HttpContext context)</span> <span class="keyword">throws</span> HttpException, IOException </span>&#123;</span><br><span class="line">                HttpEntity resEntity = response.getEntity();</span><br><span class="line">                <span class="comment">// 在此处消费InputStream</span></span><br><span class="line">                InputStream is = <span class="keyword">new</span> GZIPInputStream(resEntity.getContent());</span><br><span class="line">                InputStreamReader isr = <span class="keyword">new</span> InputStreamReader(is);</span><br><span class="line">                BufferedReader br = <span class="keyword">new</span> BufferedReader(isr);</span><br><span class="line">                String line;</span><br><span class="line">                <span class="keyword">while</span> ((line = br.readLine()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    System.out.println(line);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).build();</span><br><span class="line">        HttpGet get = <span class="keyword">new</span> HttpGet(<span class="string">"https://"</span> + postUrl);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            httpclient.execute(get);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>效果：</p><p><img alt="效果" data-src="https://i.loli.net/2019/11/03/eGZdf5oxDqAF486.png"></p><p>好了，获取到json了，今天就到这里，下一步是用fastjson解析数据了。</p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Dec 13 2019 16:47:29 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;最近在&lt;a href=&quot;https://adnmb2.com/t/21065596&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;No.21065596↘&lt;/a&gt;看到别人用python做了一个简单的机器人，下载了源码以后，打算用A岛API也做一个在A岛自动回复的机器人，今天先试着用Java从A岛爬一些串下来。&lt;/p&gt;
    
    </summary>
    
    
      <category term="知识碎片" scheme="https://www.royians.cn/categories/%E7%9F%A5%E8%AF%86%E7%A2%8E%E7%89%87/"/>
    
    
      <category term="Java" scheme="https://www.royians.cn/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>博客更新日志</title>
    <link href="https://www.royians.cn/2019/11.01.c4442e98/"/>
    <id>https://www.royians.cn/2019/11.01.c4442e98/</id>
    <published>2019-11-01T11:20:13.000Z</published>
    <updated>2019-11-27T07:03:15.336Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Dec 13 2019 16:47:30 GMT+0800 (GMT+08:00) --><p>看来得给博客弄一个更新日志了，不然日后出错不知道从哪里维护了。</p><h2 id="2019-11-01"><a href="#2019-11-01" class="headerlink" title="2019.11.01"></a>2019.11.01</h2><h3 id="0x00-新增插件"><a href="#0x00-新增插件" class="headerlink" title="0x00 新增插件"></a>0x00 新增插件</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"hexo-related-popular-posts"</span>: <span class="string">"^3.0.6"</span>,</span><br><span class="line">    <span class="attr">"dplayer"</span>: <span class="string">"^1.25.0"</span>,</span><br><span class="line">    <span class="attr">"hexo-abbrlink:"</span>: <span class="string">"^2.0.5"</span>,</span><br><span class="line">    <span class="attr">"sjcl"</span>: <span class="string">"^1.0.8"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="0x01-修改文件"><a href="#0x01-修改文件" class="headerlink" title="0x01 修改文件"></a>0x01 修改文件</h3><ul><li>powt.swig</li></ul><h3 id="0x02-新增访客地图页面"><a href="#0x02-新增访客地图页面" class="headerlink" title="0x02 新增访客地图页面"></a>0x02 新增访客地图页面</h3><ul><li>visitor</li></ul><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
       
    
    </summary>
    
    
      <category term="Hexo" scheme="https://www.royians.cn/categories/Hexo/"/>
    
    
      <category term="博客维护" scheme="https://www.royians.cn/tags/%E5%8D%9A%E5%AE%A2%E7%BB%B4%E6%8A%A4/"/>
    
  </entry>
  
  <entry>
    <title>Java 线程池</title>
    <link href="https://www.royians.cn/2019/10.31.bc557e1a/"/>
    <id>https://www.royians.cn/2019/10.31.bc557e1a/</id>
    <published>2019-10-31T01:28:35.000Z</published>
    <updated>2019-11-27T07:03:15.327Z</updated>
    
    <content type="html"><![CDATA[<div id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请再试试." data-whm="抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容."><div class="hbe-input-container"><input type="password" id="hbePass" placeholder="您好, 这里需要密码." autofocus="autofocus"><label>您好, 这里需要密码.</label><div class="bottom-line"></div></div><script id="hbeData" type="hbeData" data-hmacdigest="5152ff9e33c236f9ada75913ab8270f1a221da00df015f70273936a09ac84463">de459c709a2abbb91f30fd7286bc34f7ce42878df49c7531859e41c5ec069fee8705be370ca9c0ed92dfd1cdc99f72f0aa9a99f9c6c441eaf8a39caaa1091da6d61c643ac3b3f40a35c4fa70d14d3697e01415011ac9ae214955da8e867ba5386a40d983d677326946556dae8adf7028a2bc3d339e575a1c825ee80e1f720e84184c70576d52ed2f9e13a38ba5fea1276ebc8a3c1c939593ab8b5fce7d2c4c12a5642d604e30922dc2e14bb22e35f6bb2c6c286b361aecab24d90daba480d644c49b2309850fe65275a914ab5f337f6df5323bee0c67cdd231794441c8ec2294ff086f550dfef018302af81afaab1f2ed34adfbf1445cebb7b26b42da4f6202d39bd0d956a4d413a59fa018e151978b544e7671fe9e1f1826d4c7dd1f668a53ff9b87b80022dc684f8c8a2d67ab5dd03b4a6a01abb78684922dbb3e635ac10ea788c5b48f803c9094a6f48591b59f9c879e02c1f5591b958cc7483da10fa4f844b81e563dda808db6622329c5971a9462d721a5662de9a25ad6e9d280b1c8a50b5ee5ab1da68f90aecc051d759299ebbce6afbcb25d179cd40745ead6e62eeceee647fde67df2b18fa62cdbd1f7cca1cd0a2f2bee2eb6a931c9edd16857fa5620f65d6b1badf2863be45cf082d32adda9f5b1769e19ebaf47fdf7dfe658da6f0df61b0d89c027aef6075f541e598fb54e5de5a6b8eadea369a37228c0d1389977f168efca26af693414be52f5a0e2bb82e0bdf804791cf4551861035cb8f992fe453d3adbc3befba9ba44543977b1d8667a51520d9740480453d01398287357472b1edd4d47637f83a17825e66e28bc654bd603c66c6c09d3ff943b674f8d2dbd4da0d318153432227f9c16103d6e1ecc29c70559181374e3f85b9998d5329705a569eb03912b62841c4a5a408cdeb9cec5069a0b77d5c9777c1314a19eb7a700388779d09e0e28091d5d5d790ae3f6062e633c826a661b2f9be74968dfd05d7d1029e0e86626611884d4c0e6043ef8f2a8126e1a847c479f49fece2d6d7c83363943873b72e77ae00b833cce03b5bb96677bb089783fafe6a86cc78903e5c1a6bd1c28903a21dd48a21a066669a9bbe54822cb066133c68050ee25a25cb074f451b5984aca0a06adb0eeed4d1d36a06334ba8e43983017831355814dc98f592d9d944351c4c7b98ead38200c2cebb6dc928b8f54c3733fc5181cbb965bea3dcf88d3dedd40223ee6ac0e6d25f380aa05c1ec5929e58fa7a4e6066db480380212a66e2f2d70a9e568ee9b0fa6aac908a8e9f6784aa95352b5b24f7e38ff72195174a4e186a59bc3856289da007ef10173710cf7e62a5f314e1b78b60aab2ac8bd80e324a5d3220aa2efb99dab1468f2c000e37f06d5f6e851ca8c344008f1cb49765aa09d36804be823e1f61cf25eb640d09be8ab0185117566c1bdd5e6324f5</script></div><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
    
    <summary type="html">
    
      多线程是Java中比较难的一个东西，因此需要自己去多多摸索。今天就来了解一下多线程中线程池相关的知识。
    
    </summary>
    
    
      <category term="Java之路" scheme="https://www.royians.cn/categories/Java%E4%B9%8B%E8%B7%AF/"/>
    
    
      <category term="Java" scheme="https://www.royians.cn/tags/Java/"/>
    
      <category term="多线程" scheme="https://www.royians.cn/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/"/>
    
      <category term="未完成" scheme="https://www.royians.cn/tags/%E6%9C%AA%E5%AE%8C%E6%88%90/"/>
    
  </entry>
  
</feed>
